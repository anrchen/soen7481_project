{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12372191","self":"https://issues.apache.org/jira/rest/api/2/issue/12372191","key":"LANG-342","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2007-07-06T20:27:04.864+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Sep 20 17:55:09 UTC 2007","customfield_12310420":"147253","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7812742063_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-09-20T17:55:12.063+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-342/watchers","watchCount":1,"isWatching":false},"created":"2007-06-22T07:42:50.616+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-09-20T17:55:11.976+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"I was looking at using HashCodeBuilder rather than always writing out the strategy by hand, and I noticed one potential mistake:\n    /**\n     * Append a hashCode for a long.\n     *\n     * @param value  the long to add to the hashCode\n     * @return this\n     */\n    public HashCodeBuilder append(long value)\n    {\n        iTotal = iTotal * iConstant + ((int) (value ^ (value >> 32))); \n        return this;\n    }\n \nwhereas Effective Java and Long.hashCode() use:\n    /**\n     * Returns a hash code for this <code>Long</code>. The result is\n     * the exclusive OR of the two halves of the primitive\n     * <code>long</code> value held by this <code>Long</code> \n     * object. That is, the hashcode is the value of the expression:\n     * <blockquote><pre>\n     * (int)(this.longValue()^(this.longValue()&gt;&gt;&gt;32))\n     * </pre></blockquote> \n     *\n     * @return  a hash code value for this object.\n     */\n    public int hashCode() {\n      return (int)(value ^ (value >>> 32));\n    }\n\nSo the author accidentally used a signed right-shift rather than an unsigned.\n\n----\n\nStephen Colebourne noted that while this is a bug, it is minor and could have backward compatability issues.  I would simply recommend that a non-JavaDoc comment be added noting this method doesn't follow \"Effective Java\" correctly.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74784","customfield_12312823":null,"summary":"HashCodeBuilder.append(long) is incorrect","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bmanes","name":"bmanes","key":"bmanes","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Manes","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bmanes","name":"bmanes","key":"bmanes","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Manes","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372191/comment/12510779","id":"12510779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Setting fix version to 2.3.1 so the javadoc can be added. Then it should be reversioned to 3.0 for consideration there.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-07-06T20:27:04.864+0000","updated":"2007-07-06T20:27:04.864+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372191/comment/12518586","id":"12518586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Non-javadoc note added to HashCodeBuilder.append.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-08-09T00:29:39.870+0000","updated":"2007-08-09T00:29:39.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372191/comment/12528909","id":"12528909","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcsahnwaldt","name":"jcsahnwaldt","key":"jcsahnwaldt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christopher Sahnwaldt","active":true,"timeZone":"Europe/Berlin"},"body":"It doesn't matter if >>> or >> is used. We shift down the upper half of the long and XOR with the lower half. Of course, we also XOR the unshifted upper half with the shifted upper half (which consists of zeros or ones), but then we cast to int, which simply throws away the upper half. It doesn't matter at all if there were zeros or ones in the shifted upper half.\n\nHere's a little test. Looping through all longs takes too long, let's just use random numbers.\n\njava.util.Random rnd = new java.util.Random();\nfor (;;)\n{\n  long value = rnd.nextLong();\n  int signed = (int)(value ^ (value >> 32));\n  int unsigned = (int)(value ^ (value >>> 32));\n  if (signed != unsigned) System.out.println(value+\" \"+signed+\" \"+unsigned);\n}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcsahnwaldt","name":"jcsahnwaldt","key":"jcsahnwaldt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christopher Sahnwaldt","active":true,"timeZone":"Europe/Berlin"},"created":"2007-09-19T21:29:28.207+0000","updated":"2007-09-19T21:29:28.207+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372191/comment/12529170","id":"12529170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne","name":"scolebourne","key":"scolebourne","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Europe/London"},"body":"Thanks for the analysis. I'll close the issue as 'Won't fix', as a comment has already been added to the sourcebase.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne","name":"scolebourne","key":"scolebourne","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Europe/London"},"created":"2007-09-20T17:55:09.919+0000","updated":"2007-09-20T17:55:09.919+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-342/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d67z:"}}