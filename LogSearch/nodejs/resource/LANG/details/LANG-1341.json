{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13082158","self":"https://issues.apache.org/jira/rest/api/2/issue/13082158","key":"LANG-1341","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-06-24T17:00:31.232+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Aug 20 17:22:07 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-1341/watchers","watchCount":3,"isWatching":false},"created":"2017-06-23T15:39:26.382+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-08-20T17:22:07.591+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"If you use EqualsBuilder.appendSuper(super.equals(Object)) on an Object whose direct supertype is Object, it will succeed if and only if the two references are the same (because that's what Object.equals does).\n\nReading it out loud, this is obvious, but I think the Javadoc for EqualsBuilder encourages you to make this mistake. In particular, here's some text in the summary of the Javadoc:\n{quote}Typical use for the code is as follows:{quote}\n{code}\n public boolean equals(Object obj) {\n   if (obj == null) { return false; }\n   if (obj == this) { return true; }\n   if (obj.getClass() != getClass()) {\n     return false;\n   }\n   MyClass rhs = (MyClass) obj;\n   return new EqualsBuilder()\n                 .appendSuper(super.equals(obj))\n                 .append(field1, rhs.field1)\n                 .append(field2, rhs.field2)\n                 .append(field3, rhs.field3)\n                 .isEquals();\n  }{code}\n\nThere's also no mention of this in the javadocs for the appendSuper() method itself.\n\nMy suggestion is to fix the example at the beginning. The way HashCodeBuilder does this, which I think is the best, is to leave appendSuper out of the example and adds this line after: {quote}If required, the superclass hashCode() can be added using appendSuper(int).{quote}\n\n\nFor completeness, here's a snippet of code that illustrates this problem.\n{code}\npublic class Thing {\n    public String text;\n\n    @Override\n    public boolean equals(final Object other) {\n        if (other == null) {\n            return false;\n        }\n        if (other == this) {\n            return true;\n        }\n        if (other.getClass() != getClass()) {\n            return false;\n        }\n        final Thing thing = (Thing) other;\n        return new EqualsBuilder()\n                .appendSuper(super.equals(other))\n                .append(text, thing.text)\n                .isEquals();\n    }\n}{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"equalsBuilder.appendSuper() has incorrect behavior if the object you call equals() on is a direct supertype of Object","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=KBinswanger","name":"KBinswanger","key":"kbinswanger","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Binswanger","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=KBinswanger","name":"KBinswanger","key":"kbinswanger","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Binswanger","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082158/comment/16062061","id":"16062061","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"body":"Patches welcome!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"created":"2017-06-24T17:00:31.232+0000","updated":"2017-06-24T17:00:31.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082158/comment/16585683","id":"16585683","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user swingfly opened a pull request:\n\n    https://github.com/apache/commons-lang/pull/343\n\n    LANG-1341 update java doc to clarify use case of appendSuper()\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/swingfly/commons-lang master\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/commons-lang/pull/343.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #343\n    \n----\ncommit c70b9bd9a98cde2f768c3b0894ec3b4ac63eab99\nAuthor: jqiao <johnson.qiao@...>\nDate:   2018-08-20T09:16:04Z\n\n    LANG-1341 update java doc\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T09:23:29.232+0000","updated":"2018-08-20T09:23:29.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082158/comment/16585705","id":"16585705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/343\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/18566083/badge)](https://coveralls.io/builds/18566083)\n    \n    Coverage remained the same at 95.25% when pulling **c70b9bd9a98cde2f768c3b0894ec3b4ac63eab99 on swingfly:master** into **8f88799d4774c7c9f4be03d84b97ff3301e64479 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T09:42:50.039+0000","updated":"2018-08-20T09:42:50.039+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082158/comment/16586251","id":"16586251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user britter commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/343#discussion_r211342005\n  \n    --- Diff: src/main/java/org/apache/commons/lang3/builder/EqualsBuilder.java ---\n    @@ -58,14 +58,17 @@\n      *   }\n      *   MyClass rhs = (MyClass) obj;\n      *   return new EqualsBuilder()\n    - *                 .appendSuper(super.equals(obj))\n      *                 .append(field1, rhs.field1)\n      *                 .append(field2, rhs.field2)\n      *                 .append(field3, rhs.field3)\n      *                 .isEquals();\n      *  }\n      * </pre>\n      *\n    + * <p>\n    + * If required, the superclass <code>appendSuper()</code> can be added using {@link #appendSuper}.\n    + * </p>\n    --- End diff --\n    \n    The issues also suggested to add some documentation to `appendSuper(boolean)` making clear the implications of calling `super.equals(object)` when the class is a direct subclass ob `java.lang.Object`. I think we should add this.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T17:22:07.554+0000","updated":"2018-08-20T17:22:07.554+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082158/comment/16586252","id":"16586252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user britter commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/343#discussion_r211341588\n  \n    --- Diff: src/main/java/org/apache/commons/lang3/builder/EqualsBuilder.java ---\n    @@ -58,14 +58,17 @@\n      *   }\n      *   MyClass rhs = (MyClass) obj;\n      *   return new EqualsBuilder()\n    - *                 .appendSuper(super.equals(obj))\n      *                 .append(field1, rhs.field1)\n      *                 .append(field2, rhs.field2)\n      *                 .append(field3, rhs.field3)\n      *                 .isEquals();\n      *  }\n      * </pre>\n      *\n    + * <p>\n    + * If required, the superclass <code>appendSuper()</code> can be added using {@link #appendSuper}.\n    --- End diff --\n    \n    Better use a JavaDoc Link here: `{@link #appendSuper(boolean)}`\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T17:22:07.589+0000","updated":"2018-08-20T17:22:07.589+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082158/comment/16586253","id":"16586253","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user britter commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/343#discussion_r211340995\n  \n    --- Diff: src/main/java/org/apache/commons/lang3/builder/EqualsBuilder.java ---\n    @@ -25,10 +29,6 @@\n     import java.util.List;\n     import java.util.Set;\n     \n    -import org.apache.commons.lang3.ArrayUtils;\n    -import org.apache.commons.lang3.ClassUtils;\n    -import org.apache.commons.lang3.tuple.Pair;\n    -\n    --- End diff --\n    \n    Please don't reorganize imports\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T17:22:07.591+0000","updated":"2018-08-20T17:22:07.591+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-1341/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3go7j:"}}