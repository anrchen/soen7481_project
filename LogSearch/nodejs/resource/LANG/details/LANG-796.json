{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12548305","self":"https://issues.apache.org/jira/rest/api/2/issue/12548305","key":"LANG-796","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325282","id":"12325282","description":"This issue needs the project to discuss and decide the direction they want to take","name":"Discussion","archived":false,"released":false}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2012-03-27T13:57:40.045+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 22 14:50:51 UTC 2014","customfield_12310420":"233402","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-796/watchers","watchCount":5,"isWatching":false},"created":"2012-03-27T13:20:58.035+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326666","id":"12326666","description":"Bugfix release for 3.3.1","name":"3.3.2","archived":false,"released":true,"releaseDate":"2014-04-09"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-10-22T14:50:51.932+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313196","id":"12313196","name":"lang.time.*"}],"timeoriginalestimate":null,"description":"{{DateUtils.addDays}} does not work properly with daylight saving time. The signature of the method is {{Date addDays(Date date, int amount)}} and the javadocs says:\n\nbq. Adds a number of days to a date returning a new object. The original date object is unchanged\n\nso if X=date.getTime() is the number of milliseconds of the date in input,\nthe expected behaviour is that the returned Date has a number of milliseconds equal to X+amount*(86400000), where 86400000 is the number of milliseconds in one day.\nBut when the calculation goes across the DST change date, the number of milliseconds added does not correspond to whole days.\n\nFor example, here in Brussels, this code fragment:\n\n{code:java}\nDate input = DateUtils.parseDateStrictly(\"25-03-2012_00:00\", new String[] { \"dd-MM-yyyy_HH:mm\" });\nDate output = DateUtils.addDays(input, 1);\n{code}\n\nwill give:\n\n'input' equals to \"Sun Mar 25 00:00:00 CET 2012\"    ==> input.getTime() equals to 1332630000000\n'output' equals to \"Mon Mar 26 00:00:00 CEST 2012\"  ==> output.getTime() equals to 1332712800000\n\nwhere 1332712800000-1332630000000=82800000 < 86400000\n(in fact 82800000 is equivalent to 23h).\n\nSince {{addDays}} is working with objects Date, it should not be influenced by events like the DST.\n\n\nProposed solution: replace the current implementation\n\n{code:java}\npublic static Date add(Date date, int calendarField, int amount) {\n        if (date == null) {\n            throw new IllegalArgumentException(\"The date must not be null\");\n        }\n        Calendar c = Calendar.getInstance();\n        c.setTime(date);\n        c.add(calendarField, amount);\n        return c.getTime();\n    }\n{code}\n\nbased on Calendar with an implementation that works only with Date objects, for example:\n\n{code:java}\npublic static Date add(Date date, int calendarField, int amount) {\n        if (date == null) {\n            throw new IllegalArgumentException(\"The date must not be null\");\n        }\n        return new Date(input.getTime() + amount * 86400000l);\n    }\n{code}\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"63005","customfield_12312823":null,"summary":"DateUtils.addDays does not work properly with daylight saving time (DST)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13239466","id":"13239466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adrianc%40hlmksw.com","name":"adrianc@hlmksw.com","key":"adrianc@hlmksw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=adrianc%40hlmksw.com&avatarId=18976","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=adrianc%40hlmksw.com&avatarId=18976","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=adrianc%40hlmksw.com&avatarId=18976","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=adrianc%40hlmksw.com&avatarId=18976"},"displayName":"Adrian Crum","active":true,"timeZone":"America/Los_Angeles"},"body":"The current behavior is correct. The result added one day. One day is NOT equal to 86400000 milliseconds - as you can see from the result.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adrianc%40hlmksw.com","name":"adrianc@hlmksw.com","key":"adrianc@hlmksw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=adrianc%40hlmksw.com&avatarId=18976","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=adrianc%40hlmksw.com&avatarId=18976","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=adrianc%40hlmksw.com&avatarId=18976","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=adrianc%40hlmksw.com&avatarId=18976"},"displayName":"Adrian Crum","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-03-27T13:57:40.045+0000","updated":"2012-03-27T13:57:40.045+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13239560","id":"13239560","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"body":"From http://docs.oracle.com/javase/6/docs/api/java/util/Date.html:\n\"The class Date represents a specific instant in time, with millisecond precision. [...] the Date class is intended to reflect coordinated universal time (UTC) [...] Nearly all modern operating systems assume that 1 day = 24 × 60 × 60 = 86400 seconds in all cases.\"\n\nThe concept of daylight saving time (DST) is not present in UTC, and UTC is NEVER effected by DST, so a method that receives a Date in input and returns a Date should never be effected by DST.\nhttp://en.wikipedia.org/wiki/Coordinated_Universal_Time#Daylight_saving\n\nThe current behavior would be correct if working on Calendar objects, since a Calendar takes in account the concept of DST.\n\nBy the way, even if the final choice will be to not change the current behavior for this method, at least it should be better documented in its javadoc, to avoid misuses and misunderstanding in its way of working.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-27T15:34:48.628+0000","updated":"2012-03-27T15:34:48.628+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13239606","id":"13239606","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adrianc%40hlmksw.com","name":"adrianc@hlmksw.com","key":"adrianc@hlmksw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=adrianc%40hlmksw.com&avatarId=18976","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=adrianc%40hlmksw.com&avatarId=18976","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=adrianc%40hlmksw.com&avatarId=18976","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=adrianc%40hlmksw.com&avatarId=18976"},"displayName":"Adrian Crum","active":true,"timeZone":"America/Los_Angeles"},"body":"If you want to perform millisecond arithmetic, then I recommend you use long values and avoid using the DateUtils class.\n\nThe JavaDocs seem clear to me - the method adds a day, not 86400000 milliseconds.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adrianc%40hlmksw.com","name":"adrianc@hlmksw.com","key":"adrianc@hlmksw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=adrianc%40hlmksw.com&avatarId=18976","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=adrianc%40hlmksw.com&avatarId=18976","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=adrianc%40hlmksw.com&avatarId=18976","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=adrianc%40hlmksw.com&avatarId=18976"},"displayName":"Adrian Crum","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-03-27T16:31:48.500+0000","updated":"2012-03-27T16:31:48.500+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13239608","id":"13239608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"body":"I had to deal with DST problems just recently myself:\n\nThe behaviour of DateUtils is perfectly valid if you consider your local timezone. The method uses internally the default Calendar instance (that is set to your local timezone) and is thus affected by DST. If you want to operate on UTC dates only, use a Calendar configured for the UTC timezone.\n\nIt could be elaborated a bit more in the javadoc, so that people are aware of the fact, but there is nothing wrong with it imho.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"created":"2012-03-27T16:36:21.470+0000","updated":"2012-03-27T16:36:21.470+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13240283","id":"13240283","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"body":"That's the point: DateUtils.addDays receives in input a Date, that is an absolute time, so it should not be influenced by DST. Using a Calendar configured for the UTC timezone means to not use DateUtils.addDays, since there is no overloading method that receives a Calendar in input.\nAs Thomas said, the method uses internally the default Calendar instance, that is set to the local timezone of the server where the code is running, and this is quite problematic in those time of cloud computing, because the code will work differently if the server is located in a zone where DST is applied or not (some countries do not implement any DST at all).\n\nSummarizing, for me the issue is that the user of this method is affected by the TimeZone but he has no way to set this TimeZone, because always the default Calendar instance and the local timezone are used.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-28T08:11:20.117+0000","updated":"2012-03-28T08:11:20.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13240293","id":"13240293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"body":"The whole idea of DateUtils is to provide convenience methods when manipulating Date objects. The use-case that you describe, and I assume that's quite a common one, requires a properly configured Calendar object. Now we could add a method like this:\n\n{noformat}\n  public static Date add(Date date, int calendarField, int amount, Calendar cal) {\n     cal.setTime(date);\n     cal.add(calendarField, amount);\n     return cal.getTime();\n  }\n{noformat}\n\nBut what's the point of it? If you already have the Calendar that you want to use, why not just do it straight-away?\n\nThe fix that you propose would only support the UTC timezone, and will return wrong results for different timezones in case of a DST. While you are right, when you say that a Date object is not influenced by DST, any manipulation of it is in fact (or better could, depending on the timezone). When you need to operate in UTC time, always use proper configured Calendars (and also Formatters) for the UTC timezone (or set your local timezone to UTC).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"created":"2012-03-28T08:36:29.833+0000","updated":"2012-03-28T08:36:29.833+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13245250","id":"13245250","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"body":"I was still musing about this issue, and maybe adding an additional version with a TimeZone parameter could make sense:\n\n{noformat}\npublic static Date add(Date date, int calendarField, int amount, TimeZone tz) {\n     Calendar cal = Calendar.getInstance(tz);\n     cal.setTime(date);\n     cal.add(calendarField, amount);\n     return cal.getTime();\n}\n{noformat}\n\nBut to be consistent, this should be done for all methods (e.g. addDays, addMonths, ..), and would definitely bloat the API.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"created":"2012-04-03T12:13:07.379+0000","updated":"2012-04-03T12:13:07.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13245300","id":"13245300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joehni","name":"joehni","key":"joehni","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joehni&avatarId=36575","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joehni&avatarId=36575","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joehni&avatarId=36575","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joehni&avatarId=36575"},"displayName":"Joerg Schaible","active":true,"timeZone":"Europe/Berlin"},"body":"What about creating UTCDateUtils instead that operates on UTC and is therefore independent of any TZ? Then we have simply to properly document both types. We could use a package private base class to share common functionality.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joehni","name":"joehni","key":"joehni","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joehni&avatarId=36575","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joehni&avatarId=36575","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joehni&avatarId=36575","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joehni&avatarId=36575"},"displayName":"Joerg Schaible","active":true,"timeZone":"Europe/Berlin"},"created":"2012-04-03T13:15:04.090+0000","updated":"2012-04-03T13:15:04.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13246097","id":"13246097","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"body":"I like the idea somehow, but it would also mean to duplicate the signature of a class, as all the methods in DateUtils are static.\n\nSomething that I have in mind, is to extract the current interface of DateUtils into a separate class TBD. DateUtils would then provide two static members DEFAULT and UTC, which instantiate the separate class TBD with the corresponding timezones (TimeZone.getDefault() or TimeZone.getTimeZone(\"UTC\")). Additionally to mimick the current behavior, the existing static methods in DateUtils would call the corresponding methods of DateUtils.DEFAULT.\n\nUsers can instantiate also a TBD instance by providing a custom timezone.\n\nBut this is maybe an overkill, the same can be achieved by altering the default Timezone via TimeZone.setDefault. Although there are surely use-cases where this is not possible or desirable (e.g. due to multi-threading).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tn","name":"tn","key":"tn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Neidhart","active":true,"timeZone":"Europe/Berlin"},"created":"2012-04-04T07:53:49.731+0000","updated":"2012-04-04T07:53:49.731+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13461108","id":"13461108","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dmjones500","name":"dmjones500","key":"dmjones500","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dmjones500&avatarId=31601","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dmjones500&avatarId=31601","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dmjones500&avatarId=31601","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dmjones500&avatarId=31601"},"displayName":"Duncan Jones","active":true,"timeZone":"Europe/London"},"body":"I agree with Nicola. A class that intends to work with Date values should not be interested in daylight savings. I suspect this was an unintentional error on the part of the original implementation.\n\nAt the very least, the Javadocs need to change to reflect this behaviour.\n\nThe issue with changing the code is that people may already be relying on this behaviour. All of the {{addXXX}} methods use Calendars and would be impacted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dmjones500","name":"dmjones500","key":"dmjones500","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dmjones500&avatarId=31601","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dmjones500&avatarId=31601","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dmjones500&avatarId=31601","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dmjones500&avatarId=31601"},"displayName":"Duncan Jones","active":true,"timeZone":"Europe/London"},"created":"2012-09-22T10:43:56.682+0000","updated":"2012-09-22T10:43:56.682+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13461528","id":"13461528","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"body":"Right, changing the code now might be dangerous...\nAnd of course I agree that an update of Javadoc will be harmless for those who are already using the library, and helpful for everyone.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nicola.barbiero","name":"nicola.barbiero","key":"nicola.barbiero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicola Barbiero","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-23T22:29:03.913+0000","updated":"2012-09-23T22:29:03.913+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/13796579","id":"13796579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Javadoc patch needed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-16T08:56:10.662+0000","updated":"2013-10-16T08:56:10.662+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/14149033","id":"14149033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dmjones500","name":"dmjones500","key":"dmjones500","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dmjones500&avatarId=31601","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dmjones500&avatarId=31601","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dmjones500&avatarId=31601","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dmjones500&avatarId=31601"},"displayName":"Duncan Jones","active":true,"timeZone":"Europe/London"},"body":"I've just updated the Javadoc to provide a warning in the opening paragraphs:\n\n{quote}\nSeveral methods are provided for adding to {{Date}} objects, of the form \n{{addXXX(Date date, int amount)}}. It is important to note these methods \nuse a {{Calendar}} internally (with default timezone and locale) and may\nbe affected by changes to daylight saving time (DST).\n{quote}\n\nWe should discuss whether this behaviour should change in a future release. I've updated the affected version to the latest, since this is still an issue.\n\nSVN log:\n\nAuthor: djones\nDate: Fri Sep 26 11:19:32 2014\nNew Revision: 1627753\n\nURL: http://svn.apache.org/r1627753\nLog:\nAdded Javadoc warnings related to LANG-796.\n\nModified:\n    commons/proper/lang/trunk/src/main/java/org/apache/commons/lang3/time/DateUtils.java","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dmjones500","name":"dmjones500","key":"dmjones500","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dmjones500&avatarId=31601","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dmjones500&avatarId=31601","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dmjones500&avatarId=31601","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dmjones500&avatarId=31601"},"displayName":"Duncan Jones","active":true,"timeZone":"Europe/London"},"created":"2014-09-26T11:23:14.940+0000","updated":"2014-09-26T11:23:14.940+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/14150489","id":"14150489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adrianc%40hlmksw.com","name":"adrianc@hlmksw.com","key":"adrianc@hlmksw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=adrianc%40hlmksw.com&avatarId=18976","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=adrianc%40hlmksw.com&avatarId=18976","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=adrianc%40hlmksw.com&avatarId=18976","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=adrianc%40hlmksw.com&avatarId=18976"},"displayName":"Adrian Crum","active":true,"timeZone":"America/Los_Angeles"},"body":"I repeat:\n\nThe current behavior is correct. The result added one day. One day is NOT equal to 86400000 milliseconds - as you can see from the result.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adrianc%40hlmksw.com","name":"adrianc@hlmksw.com","key":"adrianc@hlmksw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=adrianc%40hlmksw.com&avatarId=18976","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=adrianc%40hlmksw.com&avatarId=18976","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=adrianc%40hlmksw.com&avatarId=18976","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=adrianc%40hlmksw.com&avatarId=18976"},"displayName":"Adrian Crum","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-27T07:31:24.112+0000","updated":"2014-09-27T07:31:24.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548305/comment/14179981","id":"14179981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpollak","name":"jpollak","key":"jpollak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Chaitin-Pollak","active":true,"timeZone":"America/Guatemala"},"body":"I am affected by this situation as well, and I agree with [~nicola.barbiero] - As he quoted the Oracle specification at the top of bug: \"Nearly all modern operating systems assume that 1 day = 24 × 60 × 60 = 86400 seconds in all cases\".\n\nAdding a day should add a 86400 seconds, in all cases, regardless of timezone.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpollak","name":"jpollak","key":"jpollak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Chaitin-Pollak","active":true,"timeZone":"America/Guatemala"},"created":"2014-10-22T14:50:51.932+0000","updated":"2014-10-22T14:50:51.932+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-796/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0b5if:"}}