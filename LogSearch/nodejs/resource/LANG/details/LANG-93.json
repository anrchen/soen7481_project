{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12340527","self":"https://issues.apache.org/jira/rest/api/2/issue/12340527","key":"LANG-93","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311706","id":"12311706","description":"","name":"2.0","archived":true,"released":true,"releaseDate":"2003-09-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2003-02-04T07:36:18.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat May 20 00:58:26 UTC 2006","customfield_12310420":"34105","customfield_12312320":null,"customfield_12310222":"6_*:*_2_*:*_103862255000_*|*_4_*:*_1_*:*_21000","customfield_12312321":null,"resolutiondate":"2006-05-20T00:58:26.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-93/watchers","watchCount":0,"isWatching":false},"created":"2003-02-02T22:20:30.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311706","id":"12311706","description":"","name":"2.0","archived":true,"released":true,"releaseDate":"2003-09-02"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-05-20T00:58:26.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"The ToStringBuilder doesn't handle relations to other objects\nvery well. It's very easy to get into an never-ending-loop.\nThe following code will crash the JVM with a StackOverflowError :\n\nimport org.apache.commons.lang.builder.ToStringBuilder;\n\npublic class Test1\n{\n  Test1 test;\n\n  public Test1() {}\n\n  public void setTest(Test1 test)\n  {\n    this.test = test;\n  }\n\n  public String toString()\n  {\n    return ToStringBuilder.reflectionToString(this);\n  }\n\n  public static void main(String[] args)\n  {\n    Test1 test1;\n    Test1 test2;\n\n    test1 = new Test1();\n    test2 = new Test1();\n    test1.setTest(test2);\n    test2.setTest(test1);\n\n    System.out.println(test1.toString());\n  }\n}","customfield_10010":16676.0,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12332129","id":"12332129","filename":"ASF.LICENSE.NOT.GRANTED--ToStringBuilderRTest.java","created":"2003-03-14T11:58:58.000+0000","size":2408,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12332129/ASF.LICENSE.NOT.GRANTED--ToStringBuilderRTest.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74882","customfield_12312823":null,"summary":"StackOverflow due to ToStringBuilder","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=keeskuip%40technologist.com","name":"keeskuip@technologist.com","key":"keeskuip@technologist.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kees Kuip","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=keeskuip%40technologist.com","name":"keeskuip@technologist.com","key":"keeskuip@technologist.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kees Kuip","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Operating System: other\nPlatform: Other","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403566","id":"12403566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"This example demonstrates that circular references in values, in this case, an \nobject pointing to itself, causes an infinite loop. Detecting a cycle in an \nobject graph is certainly possible but is it in the scope of the functionality \nof this method? And if so, how should it be represented? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-02-04T07:36:18.000+0000","updated":"2003-02-04T07:36:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403567","id":"12403567","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subterfusion%40hotmail.com","name":"subterfusion@hotmail.com","key":"subterfusion@hotmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"grumpoxl","active":true,"timeZone":"Etc/UTC"},"body":"Maybe a safeReflectionToString(Object) method would be a good idea, which caches\nthe toString-ed objects and refuses to process any Object more than once.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subterfusion%40hotmail.com","name":"subterfusion@hotmail.com","key":"subterfusion@hotmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"grumpoxl","active":true,"timeZone":"Etc/UTC"},"created":"2003-02-19T20:54:09.000+0000","updated":"2003-02-19T20:54:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403568","id":"12403568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mparaz%40mparaz.com","name":"mparaz@mparaz.com","key":"mparaz@mparaz.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Miguel A Paraz","active":true,"timeZone":"Etc/UTC"},"body":"ToStringBuilder.reflectionToString() is static and creates a new\nToStringBuilder() on each call, with no knowledge of the previous calls. Thus\nthere's no way to maintain an object graph, keep state and \"remember\" what\nobjects have been appended to the StringBuffer. There's no way for us to know\nthat the toString() method will call reflectionToString() again. Am I right?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mparaz%40mparaz.com","name":"mparaz@mparaz.com","key":"mparaz@mparaz.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Miguel A Paraz","active":true,"timeZone":"Etc/UTC"},"created":"2003-02-28T22:47:21.000+0000","updated":"2003-02-28T22:47:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403569","id":"12403569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"I think you are correct since there is no object connection between \nToStringBuilder and an arbitrary object's toString method which may or may not \nuse ToStringBuilder. Would something like the nasty experiment below work in \nall cases?\n\npackage test;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport junit.framework.TestCase;\nimport org.apache.commons.lang.builder.ToStringBuilder;\n\n/**\n * @author ggregory\n */\npublic class ToStringBuilderRTest extends TestCase {\n\n    public void testMe() {\n        System.out.println(new NodeFixture());\n        System.out.println(new NodeFixture(new NodeFixture(new NodeFixture\n())));\n        NodeFixture n = new NodeFixture();\n        n.node = n;\n        System.out.println(n);\n        System.out.println(new NodeFixture(new NodeFixture(n)));\n        assertEquals(\"RefectionToStringBuilder.registry.size() > 0\", \nRefectionToStringBuilder.registry.size(), 0);\n    }\n}\n\nclass NodeFixture {\n    public NodeFixture node;\n    public NodeFixture() {\n    }\n    public NodeFixture(NodeFixture node) {\n        this.node = node;\n    }\n    public String toString() {\n        return new RefectionToStringBuilder(this).toString();\n    }\n}\n\nclass RefectionToStringBuilder {\n    \n    static Map registry = new HashMap();\n    Object o;\n    \n    public RefectionToStringBuilder(Object o) {\n        this.o = o;\n    }\n    \n    public String toString() {\n        String s;\n        try {\n            if (registry.containsKey(o)) {\n                return \"<cycle detected: \" + o.getClass().getName() + \"@\" + \nSystem.identityHashCode(o) + \">\";\n            }\n            registry.put(o, null);\n            s = ToStringBuilder.reflectionToString(o);\n        } finally {\n            registry.remove(o);\n        }\n        return s;\n    }\n    \n}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-03-14T10:19:52.000+0000","updated":"2003-03-14T10:19:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403570","id":"12403570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alex%40apache.org","name":"alex@apache.org","key":"alex@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alex Chaffee","active":true,"timeZone":"Etc/UTC"},"body":"It might be better to use a ThreadLocal rather than a static to hold the         registry... In fact, it wouldn't need to be a Map, but a Set (maybe a HashSet) containing all objects currently being toStringed on this thread.   Also, why bother saying \"cycle detected\" -- why not just return the identity       code?  Like, for a foo that points to a bar and back again:             Foo@123[bar=Bar@456[foo=Foo@123]]            That's reasonably legible.              ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alex%40apache.org","name":"alex@apache.org","key":"alex@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alex Chaffee","active":true,"timeZone":"Etc/UTC"},"created":"2003-03-14T11:17:42.000+0000","updated":"2003-03-14T11:17:42.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403571","id":"12403571","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"Thank you for your comments.\n\n>It might be better to use a ThreadLocal rather than a static to hold the \nregistry... \n\nSure, we could do that. This was just a quick experiment, I did not give much \nthought as to where the registry should live.\n\n>In fact, it wouldn't need to be a Map, but a Set (maybe a HashSet) containing \nall objects currently being toStringed on this thread.\n\nAbsolutely, a Set makes sense.\n\n>Also, why bother saying \"cycle detected\" -- why not just return the \nidentitycode?  \n\nIt is indeed to verbose, the point of toString is not to detect cycles anyway.\n\nI just updated the experiment with your sugestions. Since I have patched the \nreflection code in the past, I'll take a stab at integrating this idea in \nToStringBuilder.\n\nSince the ThreadLocal will only be used by the reflection methods, it is a bit \nwasteful to have it in ToStringBuilder instead of a subclass but creating a \nReflectionToStringBuilder subclass might be over the top. I would like to \navoid further bloating the static side of ToStringBuilder...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-03-14T11:57:25.000+0000","updated":"2003-03-14T11:57:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403572","id":"12403572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"Created an attachment (id=5333)\nThe above experiment, cleaned up.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-03-14T11:58:58.000+0000","updated":"2003-03-14T11:58:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403573","id":"12403573","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"Well, not \"clean\" cleaned-up, just including Alex's suggestions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-03-14T12:00:00.000+0000","updated":"2003-03-14T12:00:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403574","id":"12403574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alex%40apache.org","name":"alex@apache.org","key":"alex@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alex Chaffee","active":true,"timeZone":"Etc/UTC"},"body":"Here's a failing unit test that I Wrote inside the existing \nToStringBuilderTest.  I wrote it as a->b->a instead of a->a.\nMaybe there's a need for both types of tests in the suite.\n\n    static class ReflectionTestCycleA {\n        ReflectionTestCycleB b;\n\n        public String toString() {\n           return ToStringBuilder.reflectionToString(this);\n        }\n    }\n\n    static class ReflectionTestCycleB {\n        ReflectionTestCycleA a;\n\n        public String toString() {\n           return ToStringBuilder.reflectionToString(this);\n        }\n    }\n\n    public void testReflectionCycle() throws Exception\n    {\n        ReflectionTestCycleA a = new ReflectionTestCycleA();\n        ReflectionTestCycleB b = new ReflectionTestCycleB();\n        a.b = b;\n        b.a = a;\n        assertEquals( toBaseString(a) + \"[b=\" + toBaseString(b) + \"[a=\" + \ntoBaseString(a) + \"]]\",\n                a.toString());\n    }\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alex%40apache.org","name":"alex@apache.org","key":"alex@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alex Chaffee","active":true,"timeZone":"Etc/UTC"},"created":"2003-03-14T12:04:22.000+0000","updated":"2003-03-14T12:04:22.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12403575","id":"12403575","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"This has been fixed with:\n\nToStringBuilder.java 1.17\nToStringStyle.java 1.11\nToStringBuilderTest.java 1.7\n\nA code review would be appreciated. Alex perhaps?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-03-27T17:09:59.000+0000","updated":"2003-03-27T17:09:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12412550","id":"12412550","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Reopening then closing to deal with migration bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-05-20T00:58:05.000+0000","updated":"2006-05-20T00:58:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340527/comment/12412551","id":"12412551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Reopening then closing to deal with migration bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-05-20T00:58:26.000+0000","updated":"2006-05-20T00:58:26.000+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-93/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d6tr:"}}