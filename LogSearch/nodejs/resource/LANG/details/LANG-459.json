{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12404365","self":"https://issues.apache.org/jira/rest/api/2/issue/12404365","key":"LANG-459","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314743","id":"12314743","description":"","name":"2.5","archived":true,"released":true,"releaseDate":"2010-02-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2008-09-16T06:44:59.310+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Sep 16 16:07:51 UTC 2008","customfield_12310420":"147333","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_88035747_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_4317504013","customfield_12312321":null,"resolutiondate":"2008-09-16T16:36:51.747+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-459/watchers","watchCount":1,"isWatching":false},"created":"2008-09-15T16:09:36.626+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":300,"aggregatetimeoriginalestimate":300,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312481","id":"12312481","description":"Bugfix release of the Lang1 codebase","name":"2.4","archived":true,"released":true,"releaseDate":"2008-03-18"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-02-25T19:53:59.299+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313198","id":"12313198","name":"lang.builder.*"}],"timeoriginalestimate":300,"description":"We found we were having problems with HashCodeBuilder under multi-threaded high load.\n\nI narrowed this down to the following attached test case.\n\nWhen I dug into the code, I found the problem was solved by commenting out the isRegistered method (though this would break the infinite loop problem).\n( I did a lot of other digging that I wont bore you with).\n\nSo instead I replaced the HashSet with an ArrayList and just added the object, rather than the toIdentityHashCodeInteger(object)\n\nThis results in about 5 lines of change.  \n\nMy suspicion is that System.identityHashCode does not return unique values (it is after all a hashcode method).  The code assumes it will return a unique value and this causes the problem at high loads.\n\nThe downside is a List vs. a Set, but I believe this is necessary.\n\nI'd like to submit this fix and have it verified (and perhaps improved).  I am convinced it is a necessary fix which we have seen show up under high loads.\n\nKindest regards, \nAndrew.","customfield_10010":null,"timetracking":{"originalEstimate":"5m","remainingEstimate":"5m","originalEstimateSeconds":300,"remainingEstimateSeconds":300},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12390119","id":"12390119","filename":"HashCodeBuilder.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-15T16:14:28.482+0000","size":31932,"mimeType":"text/java","content":"https://issues.apache.org/jira/secure/attachment/12390119/HashCodeBuilder.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12390118","id":"12390118","filename":"MyTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-15T16:12:42.300+0000","size":1773,"mimeType":"text/java","content":"https://issues.apache.org/jira/secure/attachment/12390118/MyTest.java"}],"aggregatetimeestimate":300,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74743","customfield_12312823":null,"summary":"Issue in HashCodeBuilder which only shows up under high load multi-threaded usage.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":300,"percent":0},"customfield_12311024":null,"environment":"All","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":300,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631059","id":"12631059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"body":"Here is the simple testcase for this problem.  If you run it with one thread everything is fine.  If you run it with 1000 it starts blowing up!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-15T16:12:42.335+0000","updated":"2008-09-15T16:12:42.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631060","id":"12631060","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"body":"Here is my suggested solution.  Its about 5 lines of change.  Switch the HashSet to an ArrayList and stop using the HashCode method for equality.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-15T16:14:28.512+0000","updated":"2008-09-15T16:14:28.512+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631266","id":"12631266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joehni","name":"joehni","key":"joehni","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joehni&avatarId=36575","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joehni&avatarId=36575","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joehni&avatarId=36575","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joehni&avatarId=36575"},"displayName":"Joerg Schaible","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Andrew, it is a lot easier for us to look over a patch, if you use a diff as attachment. Especially if development continues, nobody knows in the end, what you really changed when your version of the code was current.\n-- JÃ¶rg","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joehni","name":"joehni","key":"joehni","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joehni&avatarId=36575","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joehni&avatarId=36575","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joehni&avatarId=36575","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joehni&avatarId=36575"},"displayName":"Joerg Schaible","active":true,"timeZone":"Europe/Berlin"},"created":"2008-09-16T06:44:59.310+0000","updated":"2008-09-16T06:44:59.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631304","id":"12631304","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"body":"Joerg,  no problem, what do you want me to use to create the diff file?  Andrew.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-16T09:12:33.629+0000","updated":"2008-09-16T09:12:33.629+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631324","id":"12631324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"Unified diff format is the usual method.\n\nFor example, as created by Eclipse or \"svn diff\".\n\nBy the way, I can confim that I have seen the bug, and it is a problem with indentityHashCode - identical system hashcodes can be generated for both the class MyClass1 and the field containing the class MyClass2. Object.equals() on the two objects gives false (I commented out the overrides of equals) so the objects are different.\n\nA quick google shows that this has been noticed elsewhere. \n\nIt is not a bug in indentityHashCode bcause that is not guaranteed to generate unique hashes for distinct objects.\n- it just has to try to do so. The hashcode is only an int (rather than long), which reduces the number of possible values somewhat.\n\nIt's not possible to use HashMap on the original object, as HashMap uses the hash to decide where to store the key.\nIf there is no other way of generating a unique value for an object, then something other than a HashMap will have to be used - e.g. ArrayList.\n\nDebuggers seem to be able to generate unique names for objects, but the code may be rather expensive.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2008-09-16T10:24:34.671+0000","updated":"2008-09-16T10:24:34.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631327","id":"12631327","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"Or it may be possible to use the IdentityHashMap - I'll try that now.\n...\nUnfortunately that is Java 1.4+ and Lang currently targets 1.3+","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2008-09-16T10:28:12.101+0000","updated":"2008-09-16T10:37:56.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631332","id":"12631332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joehni","name":"joehni","key":"joehni","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joehni&avatarId=36575","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joehni&avatarId=36575","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joehni&avatarId=36575","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joehni&avatarId=36575"},"displayName":"Joerg Schaible","active":true,"timeZone":"Europe/Berlin"},"body":"Javadoc for Object.hashCode():\n{quote}\nThe general contract of hashCode is:\n\n* Whenever it is invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified. This integer need not remain consistent from one execution of an application to another execution of the same application.\n* If two objects are equal according to the equals(Object) method, then calling the hashCode method on each of the two objects must produce the same integer result.\n* It is not required that if two objects are unequal according to the equals(java.lang.Object) method, then calling the hashCode method on each of the two objects must produce distinct integer results. However, the programmer should be aware that producing distinct integer results for unequal objects may improve the performance of hashtables. \n{quote}\n\nThe problem is that a common implementation like\n\n{code}\n    public static class MyClass {\n        public Object arg;\n\n        public MyClass(Object arg) {\n            this.arg = arg;\n        }\n\n        public boolean equals(Object o) {\n            return EqualsBuilder.reflectionEquals(o, this);\n        }\n\n        public int hashCode() {\n            return HashCodeBuilder.reflectionHashCode(this);\n        }\n    }\n{code}\n\n... will simply violate point two of the upper specification if HashCodeBuilder.reflectionHashCode(Object) will use the identityHashCode.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joehni","name":"joehni","key":"joehni","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joehni&avatarId=36575","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joehni&avatarId=36575","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joehni&avatarId=36575","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joehni&avatarId=36575"},"displayName":"Joerg Schaible","active":true,"timeZone":"Europe/Berlin"},"created":"2008-09-16T10:48:05.429+0000","updated":"2008-09-16T10:49:41.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631344","id":"12631344","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"More googling shows that Mina and Axis have hit the same problem.\n\nAxis has a neat solution - they wrap the identityHashCode in an object which also contains a copy of the value to disambiguate the hash collisions.\n\nI can apply that as a fix - it should be cheaper than switching to a List.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2008-09-16T11:30:57.969+0000","updated":"2008-09-16T11:30:57.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631369","id":"12631369","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"body":"Sounds good to me.  I can run my TestCase against this afterwards (I have a few) and help to verify the fix.  Many thanks for your prompt response.  Andrew.\n\nPS. I'm presuming the fix is this http://marc.info/?l=axis-dev&m=103079325806666&w=2 ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-16T12:38:26.169+0000","updated":"2008-09-16T12:38:26.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631374","id":"12631374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"@Andrew\n\nYes, my suggested fix is as you mention.\n\nI copied IDKey from Axis, and then replaced \n\n    toIdentityHashCodeInteger(value)\n\nwith\n\n   new IDKey(value)\n\nthroughout. The private toIdentityHashCodeInteger(value) method can then be deleted.\n\nIt seems to work for me, but it would be worth trying some more tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2008-09-16T12:47:04.603+0000","updated":"2008-09-16T12:47:04.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631423","id":"12631423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"body":"Yup, that fix seemed to work well for me.  Andrew.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anewilson7272","name":"anewilson7272","key":"anewilson7272","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wilson","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-16T14:54:12.955+0000","updated":"2008-09-16T14:54:12.955+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404365/comment/12631445","id":"12631445","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"Fixes applied to SVN:\n\nURL: http://svn.apache.org/viewvc?rev=695951&view=rev\nLog:\nLANG-459 HashCodeBuilder.reflectionHashCode() can generate incorrect hashcodes","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2008-09-16T16:07:51.590+0000","updated":"2008-09-16T16:07:51.590+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-459/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d5yv:"}}