{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12560044","self":"https://issues.apache.org/jira/rest/api/2/issue/12560044","key":"LANG-805","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317952","id":"12317952","description":"Bug fixes and new features, at least requires Java 6.0","name":"3.2","archived":false,"released":true,"releaseDate":"2014-01-01"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321644","id":"12321644","name":"2.7","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-06-09T14:31:18.594+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Jun 09 16:55:53 UTC 2012","customfield_12310420":"252750","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_4807552_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-06-09T15:06:42.149+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-805/watchers","watchCount":1,"isWatching":false},"created":"2012-06-09T13:46:34.694+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":["patch"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":3600,"aggregatetimeoriginalestimate":3600,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314743","id":"12314743","description":"","name":"2.5","archived":true,"released":true,"releaseDate":"2010-02-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316043","id":"12316043","description":"","name":"2.6","archived":false,"released":true,"releaseDate":"2011-01-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12317550","id":"12317550","description":"November release from 3.x","name":"3.1","archived":false,"released":true,"releaseDate":"2011-11-14"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-08-22T09:25:35.551+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":3600,"description":"In commons-lang 2.6 line 250 :\n{code}ch = chars[random.nextInt(gap) + start];{code}\n-This line of code takes a random int to fetch a char in the _chars_ array regardless of its size.-\n-(Besides _start_ is useless here)-\n\n-Fixed version would be :-\n{code}//ch = chars[random.nextInt(gap)%chars.length];{code}\n\nWhen user pass 0 as _end_ or when the array is not null but empty this line ends up with an exception","customfield_10010":null,"timetracking":{"originalEstimate":"1h","remainingEstimate":"1h","originalEstimateSeconds":3600,"remainingEstimateSeconds":3600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":3600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74635","customfield_12312823":null,"summary":"RandomStringUtils.random(count, 0, 0, false, false, universe, random) always throws java.lang.ArrayIndexOutOfBoundsException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomas.belot","name":"thomas.belot","key":"thomas.belot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas BELOT","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomas.belot","name":"thomas.belot","key":"thomas.belot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas BELOT","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":3600,"percent":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":3600,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560044/comment/13292352","id":"13292352","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"Alternatively, choose end = chars.length.\n\nIn any case, the code needs to check for chars.length == 0 to avoid NPE in the modulus or IAE in random.nextInt(gap) as gap will be zero.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2012-06-09T14:31:18.594+0000","updated":"2012-06-09T14:31:18.594+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560044/comment/13292356","id":"13292356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"bq. (Besides start is useless here)\n\nI don't think start is useless; it should be possible to specify a subset of the char array.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2012-06-09T14:44:04.197+0000","updated":"2012-06-09T14:44:04.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560044/comment/13292362","id":"13292362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomas.belot","name":"thomas.belot","key":"thomas.belot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas BELOT","active":true,"timeZone":"Etc/UTC"},"body":"You're right in both comments and I was wrong in my analysis (thanks for pointing that out).\nI've reworked a fix which adds IAE in error cases : \n{code}\n\t\tif (start < 0)\n\t\t\tthrow new IllegalArgumentException(\n\t\t\t\t\t\"Requested start parameter is negative\");\n\t\tif (end < 0)\n\t\t\tthrow new IllegalArgumentException(\n\t\t\t\t\t\"Requested end parameter is negative\");\n\t\tif ((start == 0) && (end == 0)) {\n\t\t\tif (chars != null) {\n\t\t\t\tthrow new IllegalArgumentException(\n\t\t\t\t\t\t\"Requested end parameter is 0 (should be positive)\");\n\t\t\t} else if (!letters && !numbers) {\n\t\t\t\tstart = 0;\n\t\t\t\tend = Integer.MAX_VALUE;\n\t\t\t} else {\n\t\t\t\tend = 'z' + 1;\n\t\t\t\tstart = ' ';\n\t\t\t}\n\t\t}\n\t\tif (chars != null && end > chars.length)\n\t\t\tthrow new IllegalArgumentException(\n\t\t\t\t\t\"Requested end parameter is greater than chars.length\");\n\n\t\tchar[] buffer = new char[count];\n\t\tint gap = end - start;\n\t\tif (gap <= 0) {\n\t\t\tthrow new IllegalArgumentException(\n\t\t\t\t\t\"Requested gap (=end - start) is negative or zero\");\n\t\t}\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomas.belot","name":"thomas.belot","key":"thomas.belot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas BELOT","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-09T15:22:58.935+0000","updated":"2012-06-09T15:22:58.935+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560044/comment/13292377","id":"13292377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"The code has already been fixed.\nNote that start == 0 and end == 0 is specifically allowed as a special case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2012-06-09T16:14:34.648+0000","updated":"2012-06-09T16:14:34.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560044/comment/13292379","id":"13292379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomas.belot","name":"thomas.belot","key":"thomas.belot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas BELOT","active":true,"timeZone":"Etc/UTC"},"body":"... crap\n\nI'm a maven user and I'm relying on maven's version plugin to notify me of library updates.\nThe fact that you changed the artifact name for the new version of commons lang made me miss the new version ... At least this bug helped me correcting that.\n\nThanks Sebb","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomas.belot","name":"thomas.belot","key":"thomas.belot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas BELOT","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-09T16:31:29.727+0000","updated":"2012-06-09T16:31:29.727+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560044/comment/13292383","id":"13292383","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"body":"Just to clarify: the code was only fixed today (in both lang 2.x and lang 3.x) thanks to your JIRA report.\nHowever it was fixed (in SVN) just before your reworked fix was added.\n\nThe Maven artifact name change was necessary because lang3 is not fully binary compatible with lang2","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sebb%40apache.org","name":"sebb@apache.org","key":"sebb@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebb","active":true,"timeZone":"Etc/GMT"},"created":"2012-06-09T16:55:53.963+0000","updated":"2012-06-09T16:55:53.963+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-805/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d5av:"}}