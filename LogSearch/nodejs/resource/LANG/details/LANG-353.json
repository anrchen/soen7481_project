{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12376510","self":"https://issues.apache.org/jira/rest/api/2/issue/12376510","key":"LANG-353","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312481","id":"12312481","description":"Bugfix release of the Lang1 codebase","name":"2.4","archived":true,"released":true,"releaseDate":"2008-03-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-09-20T05:07:54.431+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Nov 12 19:56:45 UTC 2007","customfield_12310420":"147260","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7186234834_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-11-12T19:56:45.834+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-353/watchers","watchCount":0,"isWatching":false},"created":"2007-08-21T15:46:11.297+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-11-12T19:56:45.831+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"The Javadoc example for the class EqualsBuilder ist questionable:\n\n public boolean equals(Object obj) {\n   if (obj instanceof MyClass == false) {\n     return false;\n   }\n  ...\n\nThe implementation with instanceof lacks guarantees like equals-symmetry  (see e.g. http://www.agiledeveloper.com/articles/equals062002.htm  for a discussion of the issue)\nThe example should be changed to use getClass(). Attention: the solution in the link above is incomplete as it doesn't check for null","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74781","customfield_12312823":null,"summary":"Javadoc Example for EqualsBuilder is questionable","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12528976","id":"12528976","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Sounds like you're suggesting:\n\n * public boolean equals(Object obj) {\n *   if (obj == null) { return false; }\n *   if (obj == this) { return true; }\n *   if (obj.getClass() != getClass()) {\n *     return false;\n *   }\n *   MyClass rhs = (MyClass) obj;\n *   return new EqualsBuilder()\n *                 .appendSuper(super.equals(obj))\n *                 .append(field1, rhs.field1)\n *                 .append(field2, rhs.field2)\n *                 .append(field3, rhs.field3)\n *                 .isEquals();\n *  }\n\nThough an issue that we've come across with the builders is what to do with classloaders. So you end up with:\n\n * public boolean equals(Object obj) {\n *   if (obj == null) { return false; }\n *   if (obj == this) { return true; }\n *   if (!obj.getClass().getName().equals(getClass().getName()) {\n *     return false;\n *   }\n * ...\n\nOr maybe that doesn't matter because the rest of EqualsBuilder will be unhappy anyway.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-09-20T05:07:54.431+0000","updated":"2007-09-20T05:07:54.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12529013","id":"12529013","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"body":"Yes, that's what I'm suggesting.\n\nAnd if I understood your second point right - you are suggesting to compare the class names, because the two objects could be loaded in different classloaders:\nNo, if two classes are loaded by different classloaders, they (and their instances) are never \"equal\". Even if they are loaded from the same source, i.e. the same .class file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"created":"2007-09-20T07:46:59.307+0000","updated":"2007-09-20T07:46:59.307+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12529149","id":"12529149","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Yeah, scratch the classloader bit. I dug around a bit and it was with the Enum code and not the Builder code where we were doing such things. With Enums we did want things to be equal across classloaders, but the builders won't care.\n\nI'll update the javadoc with the first example, and a reference to Effective Java.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-09-20T16:51:49.494+0000","updated":"2007-09-20T16:51:49.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12529363","id":"12529363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"body":"Ok.\n\nDo you have an issue id for the Enum thing? My opinion on that - without knowing the details - is that Enums are not much different from classes and therefore enums from different classloaders shouldn't be considered equals. So, I would like to comment on that issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"created":"2007-09-21T09:55:45.783+0000","updated":"2007-09-21T09:55:45.783+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12533915","id":"12533915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"Not to get stuck on the details here, but Enums /are/ different from Classes, and have been made such in Jaav 5. I think of the [lang] enums useful if you cannot use Java 5 enums. I would say that enum elements must be equal across class loaders, otherwise, many an application will have some very odd results. Just imagine, as a simple example, the following (I use the Java 5 notation for brevity):\n\npublic enum Suit { CLUBS, DIAMONDS, HEARTS, SPADES }\n\nCLUBS from one class loader is not the same as... CLUBS from another class loader? Havok in poker-land! ;-)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2007-10-11T00:44:29.113+0000","updated":"2007-10-11T00:44:29.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12533977","id":"12533977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"body":"Without knowing the details again (I don't know which kind of applications you are thinking of): I think if you trying to compare enums from different classloader, that's already the problem you have. I.e. you shouldn't try this as it usually indicates that you have mixed up your classloader hierarchy. So it's better for the enum's equal to fail fast instead of allowing something which shouldn't be done.\n\nBut this discussion doesn't really belong here. If you would like to continue it, you can contact me via e-mail: kutzi@gmx.de","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi%40gmx.de","name":"kutzi@gmx.de","key":"kutzi@gmx.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Etc/UTC"},"created":"2007-10-11T07:43:00.487+0000","updated":"2007-10-11T07:43:00.487+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12537846","id":"12537846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Oops, this has sat on my machine for a while. Now committed:\n\nsvn ci -m \"Applying the javadoc sample usage change from LANG-353 as reported by Christoph Kutzinski\" src/java/org/apache/commons/lang/builder/EqualsBuilder.java\n\nSending        src/java/org/apache/commons/lang/builder/EqualsBuilder.java\nTransmitting file data .\nCommitted revision 588536.\n\nPrior to closing this, I'm pondering if the EqualsBuilderTest should change to test this pattern too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-10-26T06:14:47.230+0000","updated":"2007-10-26T06:14:47.230+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12376510/comment/12541924","id":"12541924","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"I updated the tests to use this style in r594276.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-11-12T19:56:45.822+0000","updated":"2007-11-12T19:56:45.822+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-353/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d67b:"}}