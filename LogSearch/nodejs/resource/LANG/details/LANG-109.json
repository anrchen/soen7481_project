{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12341890","self":"https://issues.apache.org/jira/rest/api/2/issue/12341890","key":"LANG-109","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2004-11-24T04:25:37.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Dec 18 11:51:28 UTC 2004","customfield_12310420":"34095","customfield_12312320":null,"customfield_12310222":"6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_69538922756","customfield_12312321":null,"resolutiondate":"2007-02-06T23:47:15.754+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-109/watchers","watchCount":0,"isWatching":false},"created":"2004-11-24T03:25:13.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311706","id":"12311706","description":"","name":"2.0","archived":true,"released":true,"releaseDate":"2003-09-02"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-02-06T23:47:15.754+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"HashCodeBuilder class failed to generate unique hashcode for objects.\n\nHere are codes to reproduce the problem:\n\nimport org.apache.commons.lang.builder.HashCodeBuilder;\n\npublic class Person\n{\n    public int id;\n    public String name;\n\n    public Person(int id, String name)\n    {\n        this.id=id;\n        this.name = name;\n    }\n\n    public int hashCode()\n    {\n        return new HashCodeBuilder(17,37).\n                append(id).\n                append(name).\n                toHashCode();\n    }\n}\n\npackage com.ball.edi.prototype;\n\npublic class TestHashCode\n{\n    static public void main(String args[])\n    {\n        Person p1=new Person(214686, \"03065\");\n        Person p2=new Person(214691, \"03006\");\n\n        System.out.println(\"The hashcode for p1 is \" + p1.hashCode());\n        System.out.println(\"The hashcode for p2 is \" + p2.hashCode());\n    }\n}\n\nWhen you ran TestHashCode class, you will get \n\nThe hashcode for p1 is 53862859\nThe hashcode for p2 is 53862859\n\nI found this problem when I am using OJB.\n\nThanks.","customfield_10010":32364.0,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74866","customfield_12312823":null,"summary":"[lang] HashCodeBuilder failed to generate unique hashcode","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bsun%40ball.com","name":"bsun@ball.com","key":"bsun@ball.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bruce Sun","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bsun%40ball.com","name":"bsun@ball.com","key":"bsun@ball.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bruce Sun","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Operating System: Windows XP\nPlatform: PC","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12341890/comment/12408155","id":"12408155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"This might be a case where the pattern:\n\n        return new HashCodeBuilder(17,37).\n                append(id).\n                append(name).\n                toHashCode();\n\nis not a fit the domain object. If the \"id\" is unique you can just return the id\nfor the hash code. The general case where the id AND the name need to be used as\na  primary key is going to be a problem for hash codes in general I think since\nwe only have the int range.\n\nAnyone else care to comment please?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2004-11-24T04:25:37.000+0000","updated":"2004-11-24T04:25:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12341890/comment/12408156","id":"12408156","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bsun%40ball.com","name":"bsun@ball.com","key":"bsun@ball.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bruce Sun","active":true,"timeZone":"Etc/UTC"},"body":"I just created the simple code so that the problem can be easily reproduced.\nThe problem actually happened in using OJB to query data from AS400/DB2\ndatabase where usually several columns are together used as primary keys.\n\nThanks.\n\nBruce\n(In reply to comment #1)\n> This might be a case where the pattern:\n> \n>         return new HashCodeBuilder(17,37).\n>                 append(id).\n>                 append(name).\n>                 toHashCode();\n> \n> is not a fit the domain object. If the \"id\" is unique you can just return the id\n> for the hash code. The general case where the id AND the name need to be used as\n> a  primary key is going to be a problem for hash codes in general I think since\n> we only have the int range.\n> \n> Anyone else care to comment please?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bsun%40ball.com","name":"bsun@ball.com","key":"bsun@ball.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bruce Sun","active":true,"timeZone":"Etc/UTC"},"created":"2004-11-24T05:21:13.000+0000","updated":"2004-11-24T05:21:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12341890/comment/12408157","id":"12408157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"Hi,\n\nIf you want to use and int and a String together as a primary key/hash code,\nthen I think you will run into issues unless the value range of id and name can\nbe reduced. \n\nHash codes are ints, so you can have as many unique hash codes for a set of\nobjects as you can have ints, which is Integer.MIN_VALUE to Integer.MAX_VALUE. A\nsimplification would be to say that you can have Integer.MAX_VALUE * 2 hash codes.\n\nIf your int id can have all int legal values AND you can have any String to\ncreate your primary keys then you'll run out of int hash codes to cover all the\ncases.\n\nSo, defining the legal range of values for id and name is where to start. From\nthere, a proper hashCode() method can be coded. We can then see how the\nHashCodeBuilder class be improved to help you.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2004-11-24T07:21:45.000+0000","updated":"2004-11-24T07:21:45.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12341890/comment/12408158","id":"12408158","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne%40joda.org","name":"scolebourne@joda.org","key":"scolebourne@joda.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Etc/UTC"},"body":"The problem with this bug report is the initial statement.\n\n\"HashCodeBuilder class failed to generate unique hashcode for objects.\"\n\nHashCodes are not unique.\nI suggest reading the Javadoc of Object.hashCode() to clarify this point.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne%40joda.org","name":"scolebourne@joda.org","key":"scolebourne@joda.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Etc/UTC"},"created":"2004-11-25T08:12:51.000+0000","updated":"2004-11-25T08:12:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12341890/comment/12408159","id":"12408159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"Indeed I should have been more careful in my comment. Thanks for clarifying.\n\nFor reference from the Sun Javadoc: \n\n\"As much as is reasonably practical, the hashCode method defined by class Object\ndoes return distinct integers for distinct objects. (This is typically\nimplemented by converting the internal address of the object into an integer,\nbut this implementation technique is not required by the JavaTM programming\nlanguage.)\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2004-11-25T08:50:30.000+0000","updated":"2004-11-25T08:50:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12341890/comment/12408160","id":"12408160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bsun%40ball.com","name":"bsun@ball.com","key":"bsun@ball.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bruce Sun","active":true,"timeZone":"Etc/UTC"},"body":"I appended the string first and then integer and seem to get different\nhashcode back. But the problem may come back for some other combinations.\n\nMany thanks for comments posted.\n\nBruce","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bsun%40ball.com","name":"bsun@ball.com","key":"bsun@ball.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bruce Sun","active":true,"timeZone":"Etc/UTC"},"created":"2004-11-30T03:06:44.000+0000","updated":"2004-11-30T03:06:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12341890/comment/12408161","id":"12408161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Stephen's point seems to nullify this as being a bug. Marking as INVALID (sorry\nit's such a cold term Bruce).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2004-12-18T11:51:28.000+0000","updated":"2004-12-18T11:51:28.000+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-109/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d6q7:"}}