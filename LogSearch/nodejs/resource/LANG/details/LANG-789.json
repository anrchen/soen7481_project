{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12544295","self":"https://issues.apache.org/jira/rest/api/2/issue/12544295","key":"LANG-789","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2012-03-01T02:37:45.073+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 01 15:40:46 UTC 2012","customfield_12310420":"229532","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_246346284_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-03-01T15:40:46.280+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-789/watchers","watchCount":2,"isWatching":false},"created":"2012-02-27T19:15:00.056+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[",","clone,","externalizable,","serializable"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317550","id":"12317550","description":"November release from 3.x","name":"3.1","archived":false,"released":true,"releaseDate":"2011-11-14"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-03-01T15:40:46.336+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313203","id":"12313203","name":"lang.*"}],"timeoriginalestimate":null,"description":"SerializationUtils clone method fails to perform some deep cloning of at least some objects containing Externalizable subobjects.\n\nHere is the @version text from the SerializationUtils.java source file:\n\nSerializationUtils.java 1199718 2011-11-09 12:43:20Z sebb $\n\n\nTo reproduce possible bug:\n\n1. Create two classes (let's call them Parent and Child) and mark both as \"implements Externalizable\".\n\n2. Write required Externalizable methods readExternal and writeExternal\n\n3. Make Child a private member/field of Parent\n\n4. Write code to override toString if necessary for Parent and Child\n\n5. Create a separate Java class to test creation and cloning of Parent and Child \n\n6. In the test class write to code to do this:\na. Create a Parent object\nb. Create a Child object\nc. Attach Child to Parent via setter\nd. Print out Parent object\ne. Use SerializationUtils.clone() to clone Parent (call it ParentClone)\nf. Print ParentClone\n\n7. Compare print output of Parent and ParentClone, observe that ParentClone does not contain Child object\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74640","customfield_12312823":null,"summary":"SerializationUtils clone method fails to perform some deep cloning","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=akubot","name":"akubot","key":"akubot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harry Levinson","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=akubot","name":"akubot","key":"akubot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harry Levinson","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows 7, Java 7 (1.7.0_03), Apache Commons Lang 3.1, NetBeans 7.1","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12544295/comment/13219747","id":"13219747","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=detinho","name":"detinho","key":"detinho","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcos Vinícius da Silva","active":true,"timeZone":"Etc/UTC"},"body":"I tested this on Windows 7 Sun JDK 1.7.0_03 and Ubuntu 10.04 Sun JDK 1.6.0.26, and worked fine. I used this test case:\n\n{code}\n    public void testInnerClassImplementsExternalizable() {\n        ExternalizableParent parent = new ExternalizableParent(\"test\");\n        ExternalizableParent parentClone = SerializationUtils.clone(parent);\n        \n        assertEquals(parent.toString(), parentClone.toString());\n    }\n    \n    private static final class ExternalizableParent implements Serializable, Externalizable {\n        private ExternalizableChild child;\n\n        public ExternalizableParent() {}\n        \n        public ExternalizableParent(String value) {\n            child = new ExternalizableChild(value);\n        }\n        \n        @Override\n        public String toString() {\n            return child.value;\n        }\n\n        public void readExternal(ObjectInput in) throws IOException,\n                ClassNotFoundException {\n            child = (ExternalizableChild)in.readObject();\n        }\n\n        public void writeExternal(ObjectOutput out) throws IOException {\n            out.writeObject(child);\n        }\n    }\n    \n    private static final class ExternalizableChild implements Serializable, Externalizable {\n        public String value;\n\n        public ExternalizableChild() {}\n        \n        public ExternalizableChild(String value) {\n            this.value = value;\n        }\n\n        public void readExternal(ObjectInput in) throws IOException,\n                ClassNotFoundException {\n            value = (String)in.readObject();\n        }\n\n        public void writeExternal(ObjectOutput out) throws IOException {\n            out.writeObject(value);\n        }\n    }\n{code}\n\nAre you doing something different?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=detinho","name":"detinho","key":"detinho","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcos Vinícius da Silva","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-01T02:37:45.073+0000","updated":"2012-03-01T02:37:45.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12544295/comment/13220104","id":"13220104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=akubot","name":"akubot","key":"akubot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harry Levinson","active":true,"timeZone":"Etc/UTC"},"body":"Thanks Marcos, closing this issue now.\n\nIt turned out to be a bug in my code elsewhere, and not the clone \"bug\" issue I submitted.\n\nI was able to run a version of your code that ran fine. Also fixed my own code and disabled the clone workaround I developed for the child class, all works fine now.\n\nThanks again for looking at this, sorry to waste your time!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=akubot","name":"akubot","key":"akubot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harry Levinson","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-01T15:40:46.309+0000","updated":"2012-03-01T15:40:46.309+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-789/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d5bz:"}}