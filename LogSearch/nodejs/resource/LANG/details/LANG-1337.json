{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13077642","self":"https://issues.apache.org/jira/rest/api/2/issue/13077642","key":"LANG-1337","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12338238","id":"12338238","description":"Feature and bugfix release, requires at least Java 7","name":"3.6","archived":false,"released":true,"releaseDate":"2017-06-08"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-06-06T11:43:26.714+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jun 07 07:58:24 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_73243689_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-06-07T07:58:24.284+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-1337/watchers","watchCount":4,"isWatching":false},"created":"2017-06-06T11:37:40.631+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["ibm","ibm-jdk","test"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331955","id":"12331955","description":"New features including Java 9 support","name":"3.5","archived":false,"released":true,"releaseDate":"2016-10-14"}],"issuelinks":[{"id":"12505804","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12505804","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12514171","key":"LANG-727","self":"https://issues.apache.org/jira/rest/api/2/issue/12514171","fields":{"summary":"ToStringBuilderTest.testReflectionHierarchyArrayList fails with IBM JDK 6","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kinow","name":"kinow","key":"kinow","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kinow&avatarId=14743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kinow&avatarId=14743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kinow&avatarId=14743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kinow&avatarId=14743"},"displayName":"Bruno P. Kinoshita","active":true,"timeZone":"Pacific/Auckland"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-06-12T12:04:52.519+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313203","id":"12313203","name":"lang.*"}],"timeoriginalestimate":null,"description":"From the 3.6 thread RC2. We had issues in the release. Two tests failed. One of these tests happened on IBM JDK 8, and was related to time zones. Gary Gregory quickly pointed that the very latest IBM JDK 8 released did not had this issue.\n\nIndeed, I grabbed a JDK 8 from IBM and had this issue, and then after looking for the latest version, I had only one test failing. This test in question was ToStringBuilderTest#testReflectionHierarchyArrayList.\n\nDebugging the test in Eclipse, with the JDK pointing to IBM JDK 8 (and taking care to not let the Eclipse maven integration change it), there is a part of the code that receives an ArrayList object to create a String with reflection.\n\nIn Oracle JDK 7, the object contains the default 10 empty positions, and thus the generated String is.\n\n{noformat}\njava.util.ArrayList@761a4a3d[elementData={<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>},size=0,modCount=0]\n{noformat}\n\nBut with IBM JDK 8, the ArrayList is empty, nada, and then I get the following in the Eclipse debugger.\n\n{noformat}\njava.util.ArrayList@761a4a3d[elementData={},size=0,modCount=0]\n{noformat}\n\nThe test is - as commented in LANG-727 - a bit flaky. However, the expected string assumes ArrayList will have an initial 10 null values. So the pull request in this issue simply creates an ArrayList with 10 initial capacity :-) a na√Øve approach, but that I believe fixes this test.\n\nThe changes in the pull request linked to this issue have all tests passing with the following set-ups:\n\n{noformat}\nApache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T05:41:47+13:00)\nMaven home: /opt/maven\nJava version: 1.7.0_80, vendor: Oracle Corporation\nJava home: /usr/lib/jvm/java-7-oracle/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\", version: \"4.4.0-78-generic\", arch: \"amd64\", family: \"unix\"\n---\njava version \"1.7.0_80\"\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\nJava HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)\n\nApache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T05:41:47+13:00)\nMaven home: /opt/maven\nJava version: 1.8.0_131, vendor: Oracle Corporation\nJava home: /usr/lib/jvm/java-8-oracle/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\", version: \"4.4.0-78-generic\", arch: \"amd64\", family: \"unix\"\n---\njava version \"1.8.0_131\"\nJava(TM) SE Runtime Environment (build 1.8.0_131-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\n\nApache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T05:41:47+13:00)\nMaven home: /opt/maven\nJava version: 1.8.0, vendor: IBM Corporation\nJava home: /home/kinow/Development/java/ibm-java-x86_64-80/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\", version: \"4.4.0-78-generic\", arch: \"amd64\", family: \"unix\"\n---\njava version \"1.8.0\"\nJava(TM) SE Runtime Environment (build pxa6480sr4fp6-20170518_02(SR4 FP6))\nIBM J9 VM (build 2.8, JRE 1.8.0 Linux amd64-64 Compressed References 20170516_348050 (JIT enabled, AOT enabled)\nJ9VM - R28_20170516_1905_B348050\nJIT  - tr.r14.java_20170516_348050\nGC   - R28_20170516_1905_B348050_CMPRSS\nJ9CL - 20170516_348050)\nJCL - 20170516_01 based on Oracle jdk8u131-b11\n{noformat}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Fix test failures in IBM JDK 8 for ToStringBuilderTest","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kinow","name":"kinow","key":"kinow","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kinow&avatarId=14743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kinow&avatarId=14743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kinow&avatarId=14743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kinow&avatarId=14743"},"displayName":"Bruno P. Kinoshita","active":true,"timeZone":"Pacific/Auckland"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kinow","name":"kinow","key":"kinow","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kinow&avatarId=14743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kinow&avatarId=14743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kinow&avatarId=14743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kinow&avatarId=14743"},"displayName":"Bruno P. Kinoshita","active":true,"timeZone":"Pacific/Auckland"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"java version \"1.8.0\"\nJava(TM) SE Runtime Environment (build pxa6480sr4fp6-20170518_02(SR4 FP6))\nIBM J9 VM (build 2.8, JRE 1.8.0 Linux amd64-64 Compressed References 20170516_348050 (JIT enabled, AOT enabled)\nJ9VM - R28_20170516_1905_B348050\nJIT  - tr.r14.java_20170516_348050\nGC   - R28_20170516_1905_B348050_CMPRSS\nJ9CL - 20170516_348050)\nJCL - 20170516_01 based on Oracle jdk8u131-b11\n\nApache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T05:41:47+13:00)\nMaven home: /opt/maven\nJava version: 1.8.0, vendor: IBM Corporation\nJava home: /home/kinow/Development/java/ibm-java-x86_64-80/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\", version: \"4.4.0-78-generic\", arch: \"amd64\", family: \"unix\"\n\ngit sha 551101299da7f75ea5478db1a6bc194963e0ac34","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10430","value":"Patch","id":"10430"}],"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16038689","id":"16038689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user kinow opened a pull request:\n\n    https://github.com/apache/commons-lang/pull/269\n\n    LANG-1337: Fix test failures in IBM JDK 8 for ToStringBuilderTest by specifying the ArrayList initial capacity.\n\n    See https://issues.apache.org/jira/browse/LANG-1337 for issue description and explanation of the changes here.\n    \n    In summary, we specify the ArrayList's initial capacity, this way the String built through reflection has the expected value. Tested with Oracle JDK 7 and 8, and IBM JDK 8.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/kinow/commons-lang LANG-1337\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/commons-lang/pull/269.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #269\n    \n----\ncommit 65b08c4f91a4e5d78eb645b46d06d7a46f8c62dd\nAuthor: Bruno P. Kinoshita <kinow@apache.org>\nDate:   2017-06-06T11:41:31Z\n\n    LANG-1337: Fix test failures in IBM JDK 8 for ToStringBuilderTest by specifying the ArrayList initial capacity.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-06T11:43:26.714+0000","updated":"2017-06-06T11:43:26.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16038755","id":"16038755","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/269\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/11847788/badge)](https://coveralls.io/builds/11847788)\n    \n    Coverage remained the same at 95.17% when pulling **65b08c4f91a4e5d78eb645b46d06d7a46f8c62dd on kinow:LANG-1337** into **551101299da7f75ea5478db1a6bc194963e0ac34 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-06T12:15:00.451+0000","updated":"2017-06-06T12:15:00.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16039027","id":"16039027","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sebbASF commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/269#discussion_r120385458\n  \n    --- Diff: src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java ---\n    @@ -316,7 +316,7 @@ public void testReflectionHierarchyArrayList() {\n             // representation different for IBM JDK 1.6.0, LANG-727\n             assumeFalse(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION));\n             assumeFalse(\"Oracle Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".compareTo(SystemUtils.JAVA_SPECIFICATION_VERSION) < 0);\n    -        final List<Object> list = new ArrayList<>();\n    +        final List<Object> list = new ArrayList<>(10);\n    --- End diff --\n    \n    I think that needs a comment.\n    Is the magic number 10 significant?\n    If so, what determines the value?\n    Could it ever change?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-06T14:57:51.247+0000","updated":"2017-06-06T14:57:51.247+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16039036","id":"16039036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andyklimczak commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/269\n  \n    probably related to [this](https://stackoverflow.com/a/34250231)?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-06T14:59:59.066+0000","updated":"2017-06-06T14:59:59.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16039038","id":"16039038","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andyklimczak commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/269#discussion_r120386094\n  \n    --- Diff: src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java ---\n    @@ -316,7 +316,7 @@ public void testReflectionHierarchyArrayList() {\n             // representation different for IBM JDK 1.6.0, LANG-727\n             assumeFalse(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION));\n             assumeFalse(\"Oracle Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".compareTo(SystemUtils.JAVA_SPECIFICATION_VERSION) < 0);\n    -        final List<Object> list = new ArrayList<>();\n    +        final List<Object> list = new ArrayList<>(10);\n    --- End diff --\n    \n    probably related to [this](https://stackoverflow.com/a/34250231)?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-06T15:00:17.957+0000","updated":"2017-06-06T15:00:17.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16039062","id":"16039062","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sebbASF commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/269#discussion_r120390348\n  \n    --- Diff: src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java ---\n    @@ -316,7 +316,7 @@ public void testReflectionHierarchyArrayList() {\n             // representation different for IBM JDK 1.6.0, LANG-727\n             assumeFalse(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION));\n             assumeFalse(\"Oracle Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".compareTo(SystemUtils.JAVA_SPECIFICATION_VERSION) < 0);\n    -        final List<Object> list = new ArrayList<>();\n    +        final List<Object> list = new ArrayList<>(10);\n    --- End diff --\n    \n    Thanks!\n    \n    If the test fails when the initial size arg is omitted, does that not also affect the behaviour of the method being tested? i.e. do apps also have to ensure that they specify the min size when using ToStringBuilder.reflectionToString() ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-06T15:15:11.831+0000","updated":"2017-06-06T15:15:11.831+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040310","id":"16040310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user kinow commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/269#discussion_r120545692\n  \n    --- Diff: src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java ---\n    @@ -316,7 +316,7 @@ public void testReflectionHierarchyArrayList() {\n             // representation different for IBM JDK 1.6.0, LANG-727\n             assumeFalse(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION));\n             assumeFalse(\"Oracle Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".compareTo(SystemUtils.JAVA_SPECIFICATION_VERSION) < 0);\n    -        final List<Object> list = new ArrayList<>();\n    +        final List<Object> list = new ArrayList<>(10);\n    --- End diff --\n    \n    Fair enough on the magic number. I'd thought about that, then noticed a few other tests with numbers. But one broken window doesn't mean I can break another one :-) fixing in another commit.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T06:45:49.865+0000","updated":"2017-06-07T06:45:49.865+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040318","id":"16040318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user kinow commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/269#discussion_r120546260\n  \n    --- Diff: src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java ---\n    @@ -316,7 +316,7 @@ public void testReflectionHierarchyArrayList() {\n             // representation different for IBM JDK 1.6.0, LANG-727\n             assumeFalse(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION));\n             assumeFalse(\"Oracle Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".compareTo(SystemUtils.JAVA_SPECIFICATION_VERSION) < 0);\n    -        final List<Object> list = new ArrayList<>();\n    +        final List<Object> list = new ArrayList<>(10);\n    --- End diff --\n    \n    >If the test fails when the initial size arg is omitted, does that not also affect the behaviour of the method being tested?\n    \n    Not really. The test simply checks the string built for an arraylist through reflection. The issue was caused for believing that the lazy initialization (as @andyklimczak) would work in the same independent of the JVM.\n    \n    What the test is verifying is correct, the current approach could be improved to make the test less flaky.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T06:49:53.146+0000","updated":"2017-06-07T06:49:53.146+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040327","id":"16040327","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/269\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/11862419/badge)](https://coveralls.io/builds/11862419)\n    \n    Coverage increased (+0.05%) to 95.221% when pulling **0344ca3f2d43e3732bf16370262303be8761a523 on kinow:LANG-1337** into **551101299da7f75ea5478db1a6bc194963e0ac34 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T06:56:03.186+0000","updated":"2017-06-07T06:56:03.186+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040328","id":"16040328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/269\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/11862419/badge)](https://coveralls.io/builds/11862419)\n    \n    Coverage increased (+0.05%) to 95.221% when pulling **0344ca3f2d43e3732bf16370262303be8761a523 on kinow:LANG-1337** into **551101299da7f75ea5478db1a6bc194963e0ac34 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T06:56:03.232+0000","updated":"2017-06-07T06:56:03.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040362","id":"16040362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user britter commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/269#discussion_r120549733\n  \n    --- Diff: src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java ---\n    @@ -316,7 +317,7 @@ public void testReflectionHierarchyArrayList() {\n             // representation different for IBM JDK 1.6.0, LANG-727\n             assumeFalse(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION));\n             assumeFalse(\"Oracle Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".compareTo(SystemUtils.JAVA_SPECIFICATION_VERSION) < 0);\n    -        final List<Object> list = new ArrayList<>();\n    +        final List<Object> list = new ArrayList<>(arraylistInitialCapacity);\n    --- End diff --\n    \n    Sorry to be nitpicking, but this should be a constant and wie should add a comment referencing JIRA-1337 with an explanation why we need to pass the initial capacity.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T07:13:14.618+0000","updated":"2017-06-07T07:13:14.618+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040368","id":"16040368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user kinow commented on a diff in the pull request:\n\n    https://github.com/apache/commons-lang/pull/269#discussion_r120550160\n  \n    --- Diff: src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java ---\n    @@ -316,7 +317,7 @@ public void testReflectionHierarchyArrayList() {\n             // representation different for IBM JDK 1.6.0, LANG-727\n             assumeFalse(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION));\n             assumeFalse(\"Oracle Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".compareTo(SystemUtils.JAVA_SPECIFICATION_VERSION) < 0);\n    -        final List<Object> list = new ArrayList<>();\n    +        final List<Object> list = new ArrayList<>(arraylistInitialCapacity);\n    --- End diff --\n    \n    Roger that. Will add a note to myself to fix the other final member variables later... trying to be concise, but I'm clearly missing the point here :-) was supposedly to be a very simple fix for this issue. Pushing a new commit in a few minutes, just finishing to review commons-fileupload vote.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T07:15:57.627+0000","updated":"2017-06-07T07:15:57.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040390","id":"16040390","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user kinow commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/269\n  \n    Comments added, received some feedback, but would still be useful someone with the last IBM JDK 8 to give it a try and confirm it works for him/her :)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T07:25:44.383+0000","updated":"2017-06-07T07:25:44.383+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040401","id":"16040401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/269\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/11862777/badge)](https://coveralls.io/builds/11862777)\n    \n    Coverage increased (+0.05%) to 95.221% when pulling **c68285bb3392665827595ac408a5fad828b0351f on kinow:LANG-1337** into **551101299da7f75ea5478db1a6bc194963e0ac34 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T07:32:15.842+0000","updated":"2017-06-07T07:32:15.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040442","id":"16040442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/commons-lang/pull/269\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-07T07:57:56.429+0000","updated":"2017-06-07T07:57:56.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13077642/comment/16040443","id":"16040443","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"body":"Merged PR. Thank you!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"created":"2017-06-07T07:58:24.312+0000","updated":"2017-06-07T07:58:24.312+0000"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-1337/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3fx87:"}}