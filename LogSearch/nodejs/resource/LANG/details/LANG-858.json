{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12617112","self":"https://issues.apache.org/jira/rest/api/2/issue/12617112","key":"LANG-858","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317952","id":"12317952","description":"Bug fixes and new features, at least requires Java 6.0","name":"3.2","archived":false,"released":true,"releaseDate":"2014-01-01"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-11-21T18:52:03.697+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Nov 24 01:57:07 UTC 2012","customfield_12310420":"259312","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_213401777_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-11-24T01:57:07.527+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-858/watchers","watchCount":2,"isWatching":false},"created":"2012-11-21T14:40:25.769+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["escaping"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-10-21T05:46:41.098+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313203","id":"12313203","name":"lang.*"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313195","id":"12313195","name":"lang.text.translate.*"}],"timeoriginalestimate":null,"description":"In case of Java and ECMA Script, the style of unicode escape {{'\\uxxxxxx'}} cannot be accepted. We need to separate it into high-surrogate and low-surrogate.\n\nFor example, you put the surrogate pair\n{code:java}\n'\\uDBFF\\uDFFD'\n{code}\noutput must be\n{code:java}\n\"\\\\uDBFF\\\\uDFFD\"\n{code}\nHowever you get\n{code:java}\n\"\\\\u10FFFD\"\n{code}\n\nTest case here:\n{code:java}\n@Test\npublic void testEscapeSurrogatePairs() throws Exception {\n    assertEquals(\"\\\\uDBFF\\\\uDFFD\", StringEscapeUtils.escapeJava(\"\\uDBFF\\uDFFD\"));\n    assertEquals(\"\\\\uDBFF\\\\uDFFD\", StringEscapeUtils.escapeEcmaScript(\"\\uDBFF\\uDFFD\"));\n}\n{code}\n\nI attached the patch which implements simple solution.\nBut UnicodeEscaper.java should not be specified for Java, I think. We need to discuss about it.\n\nThis issue does not be appeared in unescape method.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12554500","id":"12554500","filename":"JavaUnicodeEscape.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashphy","name":"ashphy","key":"ashphy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashphy&avatarId=16237","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashphy&avatarId=16237","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashphy&avatarId=16237","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashphy&avatarId=16237"},"displayName":"Kazuki Hamasaki","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-11-21T14:41:04.453+0000","size":870,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12554500/JavaUnicodeEscape.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"124585","customfield_12312823":null,"summary":"StringEscapeUtils.escapeJava() and escapeEcmaScript() do not output the escaped surrogate pairs that are Java parsable","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashphy","name":"ashphy","key":"ashphy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashphy&avatarId=16237","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashphy&avatarId=16237","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashphy&avatarId=16237","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashphy&avatarId=16237"},"displayName":"Kazuki Hamasaki","active":true,"timeZone":"Asia/Tokyo"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashphy","name":"ashphy","key":"ashphy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashphy&avatarId=16237","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashphy&avatarId=16237","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashphy&avatarId=16237","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashphy&avatarId=16237"},"displayName":"Kazuki Hamasaki","active":true,"timeZone":"Asia/Tokyo"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617112/comment/13502198","id":"13502198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"body":"\"But UnicodeEscaper.java should not be specified for Java, I think. We need to discuss about it.\"\n\nCan you elaborate please?\n\nThank you,\nGary","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"created":"2012-11-21T18:52:03.697+0000","updated":"2012-11-21T18:52:03.697+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617112/comment/13502298","id":"13502298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"body":"Ah, I see, you mean UnicodeEscaper should not be _specific_ or _tied_ to Java because Java requires a surrogate pair and not just one value.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"created":"2012-11-21T20:41:20.478+0000","updated":"2012-11-21T20:41:20.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617112/comment/13502405","id":"13502405","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashphy","name":"ashphy","key":"ashphy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashphy&avatarId=16237","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashphy&avatarId=16237","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashphy&avatarId=16237","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashphy&avatarId=16237"},"displayName":"Kazuki Hamasaki","active":true,"timeZone":"Asia/Tokyo"},"body":"For instance, Python supports {{\\Uxxxxxxxx}}, and Perl supports {{\\u\\{xxxxxxxx\\}}} styles to express the character outside of BMP.\nIt's preferable to support the several type of unicode literal.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashphy","name":"ashphy","key":"ashphy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashphy&avatarId=16237","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashphy&avatarId=16237","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashphy&avatarId=16237","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashphy&avatarId=16237"},"displayName":"Kazuki Hamasaki","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-11-21T23:05:06.108+0000","updated":"2012-11-21T23:05:06.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617112/comment/13502541","id":"13502541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"body":"I've added some more tests and @Ignore'd the failing ones. \n\nescapeJava() should behave correctly, we need to see how to make that work under the hood without loosing our current flexibility and making the whole escaping process Java-specific.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"created":"2012-11-22T02:24:55.155+0000","updated":"2012-11-22T02:24:55.155+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617112/comment/13503320","id":"13503320","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"body":"{noformat}\ncommit -m \"<action issue=\"LANG-858\" type=\"fix\">StringEscapeUtils.escapeJava() and escapeEcmaScript() do not output the escaped surrogate pairs that are Java parsable</action>\" C:/svn/org/apache/commons/trunks-proper/lang/src/changes/changes.xml C:/svn/org/apache/commons/trunks-proper/lang/src/test/java/org/apache/commons/lang3/StringUtilsTest.java C:/svn/org/apache/commons/trunks-proper/lang/src/main/java/org/apache/commons/lang3/text/translate/JavaUnicodeEscaper.java C:/svn/org/apache/commons/trunks-proper/lang/src/main/java/org/apache/commons/lang3/StringEscapeUtils.java C:/svn/org/apache/commons/trunks-proper/lang/src/main/java/org/apache/commons/lang3/text/translate/UnicodeEscaper.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/lang/src/changes/changes.xml\n    Sending        C:/svn/org/apache/commons/trunks-proper/lang/src/main/java/org/apache/commons/lang3/StringEscapeUtils.java\n    Adding         C:/svn/org/apache/commons/trunks-proper/lang/src/main/java/org/apache/commons/lang3/text/translate/JavaUnicodeEscaper.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/lang/src/main/java/org/apache/commons/lang3/text/translate/UnicodeEscaper.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/lang/src/test/java/org/apache/commons/lang3/StringUtilsTest.java\n    Transmitting file data ...\n    Committed revision 1413114.\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"created":"2012-11-24T01:57:07.541+0000","updated":"2012-11-24T01:57:07.541+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-858/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0loaf:"}}