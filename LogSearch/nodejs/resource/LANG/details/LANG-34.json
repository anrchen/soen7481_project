{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12340854","self":"https://issues.apache.org/jira/rest/api/2/issue/12340854","key":"LANG-34","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311701","id":"12311701","description":"","name":"2.1","archived":true,"released":true,"releaseDate":"2005-06-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2003-07-17T01:50:58.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Apr 26 13:10:49 UTC 2006","customfield_12310420":"147003","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":"2006-05-16T12:37:49.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-34/watchers","watchCount":0,"isWatching":false},"created":"2003-07-17T01:48:16.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311868","id":"12311868","description":"","name":"1.0.1","archived":true,"released":true,"releaseDate":"2002-11-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-03-10T22:30:46.516+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"This stems from a discussion on commons-user.\n\nThe basic idea is that ToStringStyle could be customized to include an optional\njava.text DataFormat object. If the attched patch were in (mod some formatting\nand unit tests which I can do), user could write code like this:\n\nimport java.lang.reflect.Field;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\nimport org.apache.commons.lang.builder.ReflectionToStringBuilder;\nimport org.apache.commons.lang.builder.ToStringStyle;\n\npublic class TestRTSB {\n\n    static class MyToStringStyle extends ToStringStyle {\n        MyToStringStyle() {\n            this.setDateFormat(new SimpleDateFormat(\"yyyy-MM-dd\"));\n        }\n    }\n\n    public static void main(String[] arguments) {\n        System.out.println(new TestRTSB());\n    }\n    \n    private int foo = 22;\n\n    private Date myDate = new Date();\n\n    public String toString() {\n        return new ReflectionToStringBuilder(this, new\nMyToStringStyle()).toString();\n    }\n\n// Use ToStringStyle.setDateFormat instead of:\n//\n//    public String toString0() {\n//        return (new ReflectionToStringBuilder(this) {\n//            protected Object getValue(Field field) throws\nIllegalArgumentException, IllegalAccessException {\n//                Object value = super.getValue(field);\n//                if (\"myDate\".equals(field.getName())) {\n//                    return new SimpleDateFormat(\"yyyy-MM-dd\").format(value);\n//                } else {\n//                    return value;\n//                }\n//            }\n//        }).toString();\n//    }\n}\n\nAny thoughts?","customfield_10010":21663.0,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12332414","id":"12332414","filename":"ASF.LICENSE.NOT.GRANTED--patch.txt","created":"2003-07-17T01:50:58.000+0000","size":32996,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12332414/ASF.LICENSE.NOT.GRANTED--patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74940","customfield_12312823":null,"summary":"[lang] Add support in ToStringStyle for DateFormat.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garydgregory","name":"garydgregory","key":"garydgregory","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=garydgregory&avatarId=16828","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=garydgregory&avatarId=16828","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=garydgregory&avatarId=16828","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=garydgregory&avatarId=16828"},"displayName":"Gary Gregory","active":true,"timeZone":"America/Denver"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Operating System: other\nPlatform: Other","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340854/comment/12404706","id":"12404706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"Created an attachment (id=7332)\nToStringBuilder.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-07-17T01:50:58.000+0000","updated":"2003-07-17T01:50:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340854/comment/12404707","id":"12404707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bbuckley","name":"bbuckley","key":"bbuckley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brian K. Buckley","active":true,"timeZone":"Etc/UTC"},"body":"Rather than adding support for just java.util.Date, consider adding support to \nallow a user to custom format any type of field.  Something like this:\n\n1. Create an interface called say ToStringer\n\n    public class ToStringer{\n          String toString(Object objectToFormat);\n    }\n\n2. Add a method to ToStringStyle called say addToStringer to add custom \nformatters for specific field types.  Add a map field to hold the formatters.\n\n    public void addToStringer(Class type, ToStringer formatter){\n       formatters.put(type,formatter);\n    }\n\n3. Then a client will use/configure ToStringStyle like this to custom format \nsay fields of type Dates, Doubles and Foos:\n\n        ToStringStyle t = new ToStringStyle();\n        t.addToStringer(java.util.Date.class,new ToStringer(){\n            String toString(Object date){\n                Date d = (Date date);\n                return new SimpleDateFormat(\"yyyy-MM-dd\").format(d);\n            }\n        });\n        t.addToStringer(Double.class,new ToStringer(){\n              String toString(Object decimal){\n                  return new DecimalFormat(\"#,000.0000\").format(decimal);\n              }\n          });\n        t.addToStringer(Foo.class,new ToStringer(){\n              String toString(Object foo){\n                  Foo f = (Foo)foo;\n                  return \"Foo object #\" + f.getId();\n              }\n          });\n        }\n\n-Brian","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bbuckley","name":"bbuckley","key":"bbuckley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brian K. Buckley","active":true,"timeZone":"Etc/UTC"},"created":"2003-07-17T14:45:28.000+0000","updated":"2003-07-17T14:45:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340854/comment/12404708","id":"12404708","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"body":"If we do something like that the interface function could also be (presumably\nfor internal efficiency):\n\nappend(Object object, StringBuffer buffer);\n\nWe can discuss the 3 approaches and see what people think.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggregory%40seagullsw.com","name":"ggregory@seagullsw.com","key":"ggregory@seagullsw.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10453","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10453","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10453","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10453"},"displayName":"ggregory@seagullsw.com","active":false,"timeZone":"Etc/UTC"},"created":"2003-07-18T00:01:38.000+0000","updated":"2003-07-18T00:01:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340854/comment/12404709","id":"12404709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne%40joda.org","name":"scolebourne@joda.org","key":"scolebourne@joda.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Etc/UTC"},"body":"A full converter approach is the right one if a change is to be made.\n\nThis should wait until after 2.0 though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne%40joda.org","name":"scolebourne@joda.org","key":"scolebourne@joda.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Etc/UTC"},"created":"2003-07-22T06:45:12.000+0000","updated":"2003-07-22T06:45:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340854/comment/12404710","id":"12404710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"Dropping this from 2.1 aims. Commons-Convert does seem the better choice if\npeople want this to be of a lot of use.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2004-06-27T11:21:47.000+0000","updated":"2004-06-27T11:21:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340854/comment/12404711","id":"12404711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne%40joda.org","name":"scolebourne@joda.org","key":"scolebourne@joda.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Etc/UTC"},"body":"I have added some javadoc to ToStringStyle to demonstrate how to format fields.\n\nThe rest of this goes beyond lang at the moment into the realms of convert and \nthe text package. The idea is not invalid though, so it may yet come back.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne%40joda.org","name":"scolebourne@joda.org","key":"scolebourne@joda.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Etc/UTC"},"created":"2004-10-17T01:25:53.000+0000","updated":"2004-10-17T01:25:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12340854/comment/12404712","id":"12404712","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"2.1 released, closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-04-26T13:10:49.000+0000","updated":"2006-04-26T13:10:49.000+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-34/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d76n:"}}