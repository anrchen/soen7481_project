{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12688713","self":"https://issues.apache.org/jira/rest/api/2/issue/12688713","key":"LANG-951","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325851","id":"12325851","description":"Bug fixes and and new features including: DifferenceBuilder, ClassPathUtils, RandomUtils and Jaro-Winkler String distance metric","name":"3.3","archived":false,"released":true,"releaseDate":"2014-03-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-01-17T12:26:10.578+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jan 20 17:23:49 UTC 2014","customfield_12310420":"367732","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_544631508_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-01-20T17:24:06.638+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-951/watchers","watchCount":2,"isWatching":false},"created":"2014-01-14T10:06:55.162+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":3600,"aggregatetimeoriginalestimate":3600,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317550","id":"12317550","description":"November release from 3.x","name":"3.1","archived":false,"released":true,"releaseDate":"2011-11-14"}],"issuelinks":[{"id":"12384966","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12384966","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12701157","key":"LANG-987","self":"https://issues.apache.org/jira/rest/api/2/issue/12701157","fields":{"summary":"DateUtils.getFragmentInDays(Date, Calendar.MONTH) returns wrong days","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-19T12:24:06.683+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313196","id":"12313196","name":"lang.time.*"}],"timeoriginalestimate":3600,"description":"When one trys to get the fragments of a calendar object and uses the fragment YEAR or MONTH, the returned value is wrong by 1 day in the targeted timeunit. The bug resides in the class *DateUtils* in function \n{code}\nprivate static long getFragment(Calendar calendar, int fragment, int unit)\n{code}\n\nThere is an initial recalculation if the fragment is YEAR or MONTH. So if one would like to have the minutes for the fragment YEAR for the date 2000-01-01 00:00:00 this would return 1440 which is actually wrong. The error can be found on lines 1635 - 1643.\n\nSuggested fix:\n{code}\n// Fragments bigger than a day require a breakdown to days\n        switch (fragment) {\n            case Calendar.YEAR:\n                result += ((calendar.get(Calendar.DAY_OF_YEAR)-1) * MILLIS_PER_DAY) / millisPerUnit;\n                break;\n            case Calendar.MONTH:\n                result += ((calendar.get(Calendar.DAY_OF_MONTH)-1) * MILLIS_PER_DAY) / millisPerUnit;\n                break;\n        }\n{code}","customfield_10010":null,"timetracking":{"originalEstimate":"1h","remainingEstimate":"1h","originalEstimateSeconds":3600,"remainingEstimateSeconds":3600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12623921","id":"12623921","filename":"LANG-951.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=s.goetz","name":"s.goetz","key":"s.goetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebastian Götz","active":true,"timeZone":"Europe/Berlin"},"created":"2014-01-20T08:40:44.014+0000","size":2178,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12623921/LANG-951.patch"}],"aggregatetimeestimate":3600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"368039","customfield_12312823":null,"summary":"Fragments are wrong by 1 day when using fragment YEAR or MONTH","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=s.goetz","name":"s.goetz","key":"s.goetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebastian Götz","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=s.goetz","name":"s.goetz","key":"s.goetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebastian Götz","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":3600,"percent":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":3600,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12688713/comment/13874715","id":"13874715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"body":"Hello Sebastian,\n\nwould it be possible that you create a patch file that contains a junit test that fails without the proposed fix and is successful after including it?\n\nAlso, if you plan to contribute on a regular basis (which I would appreciate ;-) ) you should file an [Individual Contributor Licence Agreement|http://www.apache.org/licenses/].\n\nThanks!\nBenedikt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"created":"2014-01-17T12:26:10.578+0000","updated":"2014-01-17T12:26:10.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12688713/comment/13876254","id":"13876254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=s.goetz","name":"s.goetz","key":"s.goetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebastian Götz","active":true,"timeZone":"Europe/Berlin"},"body":"Dear Beneditk,\n\nI have attached a path file containing the JUnit testcase and the suggested fix. Since this is the first time I ever provided a patch to an open source project I hope I made it the way you are used to have it.\n\nAfter applying my fix my own testcase runs without error but actually breaks 16 others. After reviewing what is tested there they seem to be broken rightly. I haven't done anything to prevent them from breaking. Actually the testcases are wrong.\n\nIn the DateUtilsTest.java the date tested against is August 23rd, 19:53:47.991. So for example to calculate the passed hours of the month (which is what the testcase 'testHoursOfMonthWithDate' does) one would have to do the following math 22 days * 24 hours + 19 hours = 547. The testcase assumes that the correct value is 571 which resolves to 23 days * 24 hours + 19 hours which is actually wrong from my point of view.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=s.goetz","name":"s.goetz","key":"s.goetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sebastian Götz","active":true,"timeZone":"Europe/Berlin"},"created":"2014-01-20T08:40:44.018+0000","updated":"2014-01-20T08:40:44.018+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12688713/comment/13876594","id":"13876594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"body":"Hello Sebastian,\n\nyou're right. There was a bug hiding that even found his way into the test case :) Thanks for spotting this. If committed your test in [rev. 1559780|http://svn.apache.org/r1559780], please review. If you intend to contribute more often in the future (which I would appreciate ;-) ) please be sure to only use spaces to indent your code, since displaying of the tab character depends on the editor you use (I've corrected that in your patch). Also, please file an [ICLA|http://www.apache.org/licenses], it makes things easier for us.\n\nThanks!\nBenedikt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"created":"2014-01-20T17:23:49.734+0000","updated":"2014-01-20T17:23:49.734+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-951/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1rdvj:"}}