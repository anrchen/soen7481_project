{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12999139","self":"https://issues.apache.org/jira/rest/api/2/issue/12999139","key":"LANG-1261","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331955","id":"12331955","description":"New features including Java 9 support","name":"3.5","archived":false,"released":true,"releaseDate":"2016-10-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-08-23T17:24:40.764+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Sep 18 16:02:59 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2273388546_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-09-18T16:02:58.923+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-1261/watchers","watchCount":3,"isWatching":false},"created":"2016-08-23T08:33:12.172+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["array","equals"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326513","id":"12326513","description":"Feature and bugfix release","name":"3.4","archived":false,"released":true,"releaseDate":"2015-04-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-10-19T07:01:19.003+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313203","id":"12313203","name":"lang.*"}],"timeoriginalestimate":null,"description":"ArrayUtils.contains(Object[] array, Object objectToFind) wrongly returns false.\n\nSTEPS TO REPRODUCE\n=========================================================\n-Create a superclass \"Parent\" and override equals and hashcode based on some member id variable.\n-Create a class \"Child\" extending \"Parent\". Do not override equals nor hashcode.\n\n-Let \"childrens\" be an array of type Child[] containing several instances.\nCreate an instance of Parent \"p\" with the same id as childrens[0], such that childrens[0].equals(p) returns true and p.equals(childrens[0]) returns true as well.\n\nBecause they are equals, ArrayUtils.contains(childrens, p) should return true. However it returns false.\n\n\nWHERE THE BUG IS LOCATED\n=====================================================\n-Go to ArrayUtils.class, line 1917. In the \"indexOf\" method implementation, before going into calling equals for each element of the input array, there is some sort of optimization check to make sure the instance to be found is an instance of the array type:\n\n} else if (array.getClass().getComponentType().isInstance(objectToFind)) {\n\nThat line is wrong. In our case, the array contains elements of type \"Child\", whereas the object to be found is of type \"Parent\". They are equals according to the equals implementation of \"Parent\", but obviously Children.class.isInstance(p) is false.\n\n\nEXPECTED BEHAVIOR\n================================================\nSince the method signature accepts an array of Object[] and an instance of Object, it should ignore the classes of the arguments. It should be possible to call \"ArrayUtils.contains(Child[] children, Parent p)\", in fact it should be possible to do this with any combination of classes, not only the ones assignable from the class hierarchy.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"ArrayUtils.contains returns false for instances of subtypes","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=h0m3r_j4y","name":"h0m3r_j4y","key":"h0m3r_j4y","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Homer Jay","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=h0m3r_j4y","name":"h0m3r_j4y","key":"h0m3r_j4y","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Homer Jay","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Android","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10431","value":"Important","id":"10431"}],"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12999139/comment/15433237","id":"15433237","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user PascalSchumacher opened a pull request:\n\n    https://github.com/apache/commons-lang/pull/183\n\n    LANG-1261: ArrayUtils#contains ArrayUtils#indexOf should compare obje…\n\n    …cts with different types\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/PascalSchumacher/commons-lang LANG_1261\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/commons-lang/pull/183.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #183\n    \n----\ncommit 82a54681e2e7ffbb21fbc7de4b252f0749201f12\nAuthor: pascalschumacher <pascalschumacher@gmx.net>\nDate:   2016-08-23T17:22:55Z\n\n    LANG-1261: ArrayUtils#contains ArrayUtils#indexOf should compare objects with different types\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-08-23T17:24:40.764+0000","updated":"2016-08-23T17:24:40.764+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12999139/comment/15433250","id":"15433250","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/183\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/7572398/badge)](https://coveralls.io/builds/7572398)\n    \n    Coverage increased (+0.02%) to 93.483% when pulling **82a54681e2e7ffbb21fbc7de4b252f0749201f12 on PascalSchumacher:LANG_1261** into **f30c4607a2b6dcc7dc4476d321fc1de32ce9b780 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-08-23T17:29:59.646+0000","updated":"2016-08-23T17:29:59.646+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12999139/comment/15433308","id":"15433308","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/183\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/7572948/badge)](https://coveralls.io/builds/7572948)\n    \n    Coverage increased (+0.02%) to 93.49% when pulling **d004551983ea3efac4fb8b8cf22d74e9938fd457 on PascalSchumacher:LANG_1261** into **f30c4607a2b6dcc7dc4476d321fc1de32ce9b780 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-08-23T18:04:17.638+0000","updated":"2016-08-23T18:04:17.638+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12999139/comment/15450049","id":"15450049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user coveralls commented on the issue:\n\n    https://github.com/apache/commons-lang/pull/183\n  \n    \n    [![Coverage Status](https://coveralls.io/builds/7676541/badge)](https://coveralls.io/builds/7676541)\n    \n    Coverage increased (+0.02%) to 93.477% when pulling **1f56bd103d53c8c6ba7502c6586c26be01bfdb80 on PascalSchumacher:LANG_1261** into **c7c85ee39892df3ca007c6596c41654865be7e43 on apache:master**.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-08-30T20:23:37.964+0000","updated":"2016-08-30T20:23:37.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12999139/comment/15501212","id":"15501212","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/commons-lang/pull/183\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-18T16:02:14.749+0000","updated":"2016-09-18T16:02:14.749+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12999139/comment/15501214","id":"15501214","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"body":"Fixed in 42f2058c83f256d8654b349d5249d6f59920f88b","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=britter","name":"britter","key":"britter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=britter&avatarId=18287","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=britter&avatarId=18287","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=britter&avatarId=18287","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=britter&avatarId=18287"},"displayName":"Benedikt Ritter","active":true,"timeZone":"Europe/Berlin"},"created":"2016-09-18T16:02:59.078+0000","updated":"2016-09-18T16:02:59.078+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-1261/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i32mvz:"}}