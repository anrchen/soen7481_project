{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12343351","self":"https://issues.apache.org/jira/rest/api/2/issue/12343351","key":"LANG-259","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310481","id":"12310481","key":"LANG","name":"Commons Lang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310481&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310481&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310481&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310481&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10260","id":"10260","description":"Apache Commons components","name":"Commons"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311702","id":"12311702","name":"2.2","archived":true,"released":true,"releaseDate":"2006-10-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-06-08T15:42:51.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Aug 18 22:21:34 UTC 2006","customfield_12310420":"147190","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7607479000_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2006-08-18T22:21:34.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-259/watchers","watchCount":0,"isWatching":false},"created":"2006-05-22T21:10:15.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311701","id":"12311701","description":"","name":"2.1","archived":true,"released":true,"releaseDate":"2005-06-13"}],"issuelinks":[{"id":"12313898","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313898","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12343306","key":"LANG-258","self":"https://issues.apache.org/jira/rest/api/2/issue/12343306","fields":{"summary":"Enum JavaDoc: 1) outline 5.0 native Enum migration 2) warn not to use the switch() , 3) point out approaches for persistence and gui","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-10-21T11:26:20.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"int org.apache.commons.lang.enums.ValuedEnum.compareTo(Object other)\n is not typesafe - if the int-values are the same, it will return \"0\" even for two totally different sub-classes of ValuedEnum","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74816","customfield_12312823":null,"summary":"ValuedEnum.compareTo(Object other) not typesafe - it easily could be...","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"all","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343351/comment/12412798","id":"12412798","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"body":"Before just comparing the \n   iValue - ((ValuedEnum) other).iValue\nit should be checked that the classes are the same!\n\n\t\tEnum otherEnum = (Enum) other;\n\t\tString thisClassName = this.getClass().getName();\n\t\tString otherClassName = otherEnum.getClass().getName();\n\t\tif (!otherClassName.equals(thisClassName)) {\n\t\t\tlog.warn(\"enum classes are not equal \\\"\" + thisClassName + \"\\\" <> \\\"\" + otherClassName + \"\\\"\");\n\t\t\tthrow new ClassCastException(\"enum classes are not equal \\\"\" + thisClassName + \"\\\" <> \\\"\" + otherClassName\n\t\t\t\t\t+ \"\\\"\");\n\t\t}\n\nFurthermore, it might be recommendable to make some methods of org.apache.commons.lang.enums.Enum at least \"protected\" such that ValuedEnum can use them too:\n\nIf available, I would love to also have the more sophisticated checks, Enum.compareTo(Object other) does also used in ValuedEnum.compareTo(Object other):\n\nif (res == 0) {\n\t\t\tString otherName = otherEnum.getName();\n\t\t\tif (other.getClass() != this.getClass()) {\n\t\t\t\tif (other.getClass().getName().equals(this.getClass().getName())) {\n\t\t\t\t\treturn iName.compareTo(getNameInOtherClassLoader(other));\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = iName.compareTo(otherName);\n\t\t\tif (res != 0) {\n\t\t\t\tlog.warn(\"enum names are not equal \\\"\" + otherName + \"\\\" <> \\\"\" + this.getName() + \"\\\"\");\n\t\t\t\tthrow new ClassCastException(\"enum names are not equal \\\"\" + otherName + \"\\\" <> \\\"\" + this.getName()\n\t\t\t\t\t\t+ \"\\\"\");\n                       }\n}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"created":"2006-05-22T23:00:43.000+0000","updated":"2006-05-22T23:00:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343351/comment/12412801","id":"12412801","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"body":"furthermore, it would be great if the classe's init would also detect if multiple int values are the same:\n\ne.g.\n\n public static final JavaVersionEnum  JAVA1_0  = new JavaVersionEnum( \"Java 1.0\", JAVA1_0_VALUE );\n public static final JavaVersionEnum  JAVA1_0_=  = new JavaVersionEnum( \"Java 1.0.0\", JAVA1_0_VALUE );","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"created":"2006-05-22T23:45:37.000+0000","updated":"2006-05-22T23:45:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343351/comment/12412802","id":"12412802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"body":"similarly, it should detect double entries of this kind...\n\npublic static final int  JAVA1_0_VALUE  = 100;\npublic static final int  JAVA1_0_0VALUE  = 100;\n...\n\n public static final JavaVersionEnum JAVA1_0 = new JavaVersionEnum( \"Java 1.0\", JAVA1_0_VALUE );\n public static final JavaVersionEnum JAVA1_0_0 = new JavaVersionEnum( \"Java 1.0.0\", JAVA1_0_0VALUE );\n\n------\nps, the last line in the previous comment should have been\n\npublic static final JavaVersionEnum JAVA1_0_0 = new JavaVersionEnum( \"Java 1.0.0\", JAVA1_0_VALUE );","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"created":"2006-05-22T23:47:29.000+0000","updated":"2006-05-22T23:47:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343351/comment/12412909","id":"12412909","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"body":"see also http://issues.apache.org/struts/browse/SB-20 SB-20 and LANG-258","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ralfhauser","name":"ralfhauser","key":"ralfhauser","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ralf Hauser","active":true,"timeZone":"Etc/UTC"},"created":"2006-05-23T18:03:09.000+0000","updated":"2006-05-23T18:03:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343351/comment/12415296","id":"12415296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"body":"In an effort to get 2.2 out sooner rather than later, I'm assiging all the Enum issues to 2.3. There's been no work on them currently and might be best to focus on them in a 2.3 release instead of trying to squeeze them into the 2.2 release.\n\nHopefully this will keep the 2.3 release scope pretty tight.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bayard","name":"bayard","key":"bayard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henri Yandell","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-06-08T15:42:51.000+0000","updated":"2006-06-08T15:42:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343351/comment/12427364","id":"12427364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne","name":"scolebourne","key":"scolebourne","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Europe/London"},"body":"Does anyone believe that the classloader tricks in Enum are useful? They seem like a Bad Idea now, and are broken, even for equals.\n\nIs it  too backwards incompatible to remove the classloader code?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne","name":"scolebourne","key":"scolebourne","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Europe/London"},"created":"2006-08-10T22:43:51.000+0000","updated":"2006-08-10T22:43:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343351/comment/12429140","id":"12429140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne","name":"scolebourne","key":"scolebourne","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Europe/London"},"body":"Fix compareTo to check type\nrv 432748","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scolebourne","name":"scolebourne","key":"scolebourne","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephen Colebourne","active":true,"timeZone":"Europe/London"},"created":"2006-08-18T22:21:34.000+0000","updated":"2006-08-18T22:21:34.000+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LANG-259/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d6f3:"}}